!function(){"use strict";const e={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},t=document.querySelector(".profile__edit-button"),n=document.querySelector(".form_type_edit"),s=n.querySelector(".form__input_type_name"),i=n.querySelector(".form__input_type_info"),o=document.querySelector(".profile__add-button"),r=document.querySelector(".form_type_add-card");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{constructor(e,t,n){a(this,"_handleLikeButton",(e=>{e.target.classList.toggle("card__like_active")})),a(this,"_handleDeleteCardButton",(()=>{this._cardElement.remove(),this._cardElement=null})),this._image=e.link,this._title=e.name,this._alt=e.alt,this._cardSelector=t,this._handleCardClick=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardElement.querySelector(".card__delete-button").addEventListener("click",this._handleDeleteCardButton),this._cardElement.querySelector(".card__like").addEventListener("click",this._handleLikeButton),this._cardElement.querySelector(".card__picture").addEventListener("click",this._handleCardClick)}generateCard(){this._cardElement=this._getTemplate();const e=this._cardElement.querySelector(".card__picture"),t=this._cardElement.querySelector(".card__description");return e.src=this._image,e.alt=this._alt,t.textContent=this._title,this._setEventListeners(),this._cardElement}}class c{constructor(e,t){this._config=e,this._formElement=t,this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector))}_showInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent="",t.classList.remove(this._config.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setButtonToDisabledState(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}_setButtonToEnabledState(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1}_changeButtonState(e){this._hasInvalidInput(e)?this._setButtonToDisabledState(this._buttonElement):this._setButtonToEnabledState(this._buttonElement)}_setEventListeners(){const e=Array.from(this._formElement.querySelectorAll(this._config.inputSelector));this._changeButtonState(e,this._buttonElement),e.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._changeButtonState(e,this._buttonElement)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>e.preventDefault)),this._setEventListeners()}resetFormValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._setButtonToDisabledState()}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d{constructor(e){u(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),u(this,"_handleMouseClick",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup_opened"),this._setEventListeners()}close(){this._popupElement.classList.remove("popup_opened"),this._removeEventListeners()}_setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleMouseClick),document.addEventListener("keydown",this._handleEscClose)}_removeEventListeners(){this._popupElement.removeEventListener("mousedown",this._handleMouseClick),document.removeEventListener("keydown",this._handleEscClose)}}class _ extends d{constructor(e,t,n){var s,i;super(e),i=e=>{e.preventDefault();const t=this._getInputValues();this._handleSubmit(t),this.close()},(s="_onSubmit")in this?Object.defineProperty(this,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[s]=i,this._handleSubmit=t,this._formValidator=n,this._formElement=this._popupElement.querySelector(".form")}_getInputValues(){const e=[...this._popupElement.querySelectorAll(".form__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}open(){super.open(),this._formValidator.resetFormValidation()}close(){super.close(),this._formElement.reset()}_setEventListeners(){super._setEventListeners(),this._formElement.addEventListener("submit",this._onSubmit)}_removeEventListeners(){super._removeEventListeners(),this._formElement.removeEventListener("submit",this._onSubmit)}}const h=new c(e,n),m=new c(e,r);h.enableValidation(),m.enableValidation();const p=e=>{const t=new l(e,"#card",(()=>(e=>{f.open(e.link,e.name)})(e)));return t.generateCard()},E=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._section=document.querySelector(t)}addItem(e){this._section.prepend(e)}renderCards(){this._items.forEach(this._renderer)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg",alt:"A river with forest on the banks, mountains in the background"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg",alt:"A lake surrounded by mountains and forest"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg",alt:"Sunrise above dark hills"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg",alt:"Starry night, mountains with piece of snow"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg",alt:"Coast of lake, mountains on the background"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg",alt:"Small dock with little boats on the mountain lake"}],renderer:e=>{E.addItem(p(e))}},".gallery__list");E.renderCards();const b=new class{constructor(e,t){this._nameField=document.querySelector(e),this._jobField=document.querySelector(t)}getUserInfo(){return{name:this._nameField.textContent,job:this._jobField.textContent}}setUserInfo(e){this._nameField.textContent=e.name,this._jobField.textContent=e.info}}(".profile__name",".profile__about"),f=new class extends d{constructor(e){super(e)}open(e,t){super.open();const n=document.querySelector(".popup-picture-box__image"),s=document.querySelector(".popup-picture-box__caption");n.src=e,n.alt="Here was a beautiful picture of ".concat(t),s.textContent=t}}(".popup_type_picture"),v=new _(".popup_type_edit",(e=>{b.setUserInfo(e)}),h),y=new _(".popup_type_add-card",(e=>{e.alt="Here was a beautiful picture of ".concat(e.name),E.addItem(p(e))}),m);t.addEventListener("click",(()=>{(()=>{const e=b.getUserInfo();s.value=e.name,i.value=e.job})(),v.open()})),o.addEventListener("click",(()=>y.open()))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUFLQyxPRnlDUixpQkFBa0IsbUJBRTFDcEIsRUFBYSxJR3JEWixjQUE2QjVCLEVBQ2xDOUQsWUFBWStELEdBQ1ZhLE1BQU1iLEdBR1JLLEtBQUsyQyxFQUFPQyxHQUNWcEMsTUFBTVIsT0FDTixNQUFNNkMsRUFBZXpILFNBQVNDLGNBQWMsNkJBQ3RDeUgsRUFBZTFILFNBQVNDLGNBQWMsK0JBQzVDd0gsRUFBYXBGLElBQU1rRixFQUNuQkUsRUFBYWpHLElBQWIsMENBQXNEZ0csR0FDdERFLEVBQWFwRixZQUFja0YsSUgwQ08sdUJBRWhDRyxFQUFnQixJQUFJMUMsRUFBYyxvQkFBcUJJLElBQzNEd0IsRUFBU08sWUFBWS9CLEtBQ3BCUSxHQUVHK0IsRUFBZSxJQUFJM0MsRUFBYyx3QkFBeUJJLElBQzlEQSxFQUFZN0QsSUFBWiwwQ0FBcUQ2RCxFQUFZL0QsTUFDakU2RSxFQUFhTyxRQUFRWCxFQUFXVixNQUMvQlMsR0FXRC9GLEVBQWtCZ0MsaUJBQWlCLFNBQVMsS0FQbEIsTUFDMUIsTUFBTXVGLEVBQU9ULEVBQVNLLGNBQ3RCL0csRUFBZXVGLE1BQVE0QixFQUFLaEcsS0FDNUJsQixFQUFlc0YsTUFBUTRCLEVBQUtILEtBSzFCVSxHQUNBRixFQUFjL0MsVUFHaEJ2RSxFQUFjMEIsaUJBQWlCLFNBQVMsSUFBTTZGLEVBQWFoRCxTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBGb3JtIHZhbGlkYXRpb24gb2JqZWN0ICovXHJcblxyXG5jb25zdCBjb25maWdPYmplY3QgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl92aXNpYmxlXCJcclxufVxyXG5cclxuLyogSW5pdGlhbCBjYXJkcyBhcnJheSovXHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgICBhbHQ6IFwiQSByaXZlciB3aXRoIGZvcmVzdCBvbiB0aGUgYmFua3MsIG1vdW50YWlucyBpbiB0aGUgYmFja2dyb3VuZFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkEgbGFrZSBzdXJyb3VuZGVkIGJ5IG1vdW50YWlucyBhbmQgZm9yZXN0XCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgICBhbHQ6IFwiU3VucmlzZSBhYm92ZSBkYXJrIGhpbGxzXCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgYWx0OiBcIlN0YXJyeSBuaWdodCwgbW91bnRhaW5zIHdpdGggcGllY2Ugb2Ygc25vd1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkNvYXN0IG9mIGxha2UsIG1vdW50YWlucyBvbiB0aGUgYmFja2dyb3VuZFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgICBhbHQ6IFwiU21hbGwgZG9jayB3aXRoIGxpdHRsZSBib2F0cyBvbiB0aGUgbW91bnRhaW4gbGFrZVwiXHJcbiAgfVxyXG5dO1xyXG5cclxuLyogRWRpdCBmb3JtIGNvbnN0YW50cyAqL1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fdHlwZV9lZGl0Jyk7XHJcbmNvbnN0IHBvcHVwSW5wdXROYW1lID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX25hbWUnKTtcclxuY29uc3QgcG9wdXBJbnB1dEluZm8gPSBlZGl0UHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfaW5mbycpO1xyXG5cclxuLyogQWRkIGNhcmQgZm9ybSBjb25zdGFudHMgKi9cclxuXHJcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5jb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfYWRkLWNhcmQnKTtcclxuXHJcbmV4cG9ydCB7IFxyXG4gICAgICAgIGNvbmZpZ09iamVjdCwgXHJcbiAgICAgICAgaW5pdGlhbENhcmRzLCBcclxuICAgICAgICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICAgICAgICBlZGl0UHJvZmlsZUZvcm0sXHJcbiAgICAgICAgcG9wdXBJbnB1dE5hbWUsXHJcbiAgICAgICAgcG9wdXBJbnB1dEluZm8sXHJcbiAgICAgICAgYWRkQ2FyZEJ1dHRvbixcclxuICAgICAgICBhZGRDYXJkRm9ybVxyXG4gICAgICAgfTsiLCIvKiBDbGFzcyBDYXJkOlxyXG4tIGNyZWF0aW5nIGEgY2FyZCBlbGVtZW50O1xyXG4tIGNhcmQgZ2VuZXJhdGlvbjtcclxuLSBldmVudCBsaXN0ZW5lcnM6IGxpa2UgYnV0dG9uLCBkZWxldGUgYnV0dG9uLCBvcGVuIG1vZGFsIHdpbmRvdyAqL1xyXG5cclxuY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5faW1hZ2UgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fdGl0bGUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fYWx0ID0gY2FyZERhdGEuYWx0O1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uID0gKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmRCdXR0b24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGRlbGV0ZUNhcmRCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpO1xyXG4gICAgZGVsZXRlQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmRCdXR0b24pO1xyXG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XHJcbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbik7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fcGljdHVyZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIFxyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3BpY3R1cmUnKTtcclxuICAgIGNvbnN0IGNhcmREZXNjcmlwdGlvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZXNjcmlwdGlvbicpO1xyXG5cclxuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9hbHQ7XHJcbiAgICBjYXJkRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IENhcmQgfTsiLCIvKiBDbGFzcyBmb3IgZm9ybXMgdmFsaWRhdGlvbiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZ09iamVjdCwgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZ09iamVjdDtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IgKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIFxyXG4gIF9oaWRlSW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5IChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBfaGFzSW52YWxpZElucHV0ICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pXHJcbiAgfVxyXG4gIFxyXG4gIF9zZXRCdXR0b25Ub0Rpc2FibGVkU3RhdGUgKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuICBcclxuICBfc2V0QnV0dG9uVG9FbmFibGVkU3RhdGUgKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgX2NoYW5nZUJ1dHRvblN0YXRlIChpbnB1dExpc3QpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9zZXRCdXR0b25Ub0Rpc2FibGVkU3RhdGUodGhpcy5fYnV0dG9uRWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zZXRCdXR0b25Ub0VuYWJsZWRTdGF0ZSh0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzICgpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fY2hhbmdlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICBcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpXHJcbiAgICAgICAgdGhpcy5fY2hhbmdlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfVxyXG4gIFxyXG4gIGVuYWJsZVZhbGlkYXRpb24gKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIFxyXG4gIHJlc2V0Rm9ybVZhbGlkYXRpb24gKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pXHJcbiAgICB0aGlzLl9zZXRCdXR0b25Ub0Rpc2FibGVkU3RhdGUoKTtcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTW91c2VDbGljayA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVNb3VzZUNsaWNrKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlTW91c2VDbGljayk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQsIGZvcm1WYWxpZGF0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybVZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3I7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gWy4uLnRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKV07XHJcbiAgICBjb25zdCB2YWx1ZXNPYmplY3QgPSB7fTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgdmFsdWVzT2JqZWN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWx1ZXNPYmplY3Q7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fZm9ybVZhbGlkYXRvci5yZXNldEZvcm1WYWxpZGF0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgX29uU3VibWl0ID0gKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQoaW5wdXRWYWx1ZXMpO1xyXG4gICAgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9vblN1Ym1pdCk7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX29uU3VibWl0KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcclxuaW1wb3J0IHsgXHJcbiAgICAgICAgY29uZmlnT2JqZWN0LCBcclxuICAgICAgICBpbml0aWFsQ2FyZHMsIFxyXG4gICAgICAgIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gICAgICAgIGVkaXRQcm9maWxlRm9ybSxcclxuICAgICAgICBwb3B1cElucHV0TmFtZSxcclxuICAgICAgICBwb3B1cElucHV0SW5mbyxcclxuICAgICAgICBhZGRDYXJkQnV0dG9uLFxyXG4gICAgICAgIGFkZENhcmRGb3JtIFxyXG4gICAgICB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5cclxuLyogRm9ybXMgdmFsaWRhdGlvbiAqL1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnT2JqZWN0LGVkaXRQcm9maWxlRm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWdPYmplY3QsIGFkZENhcmRGb3JtKTtcclxuXHJcbihmdW5jdGlvbiBzZXRGb3Jtc1ZhbGlkYXRvcigpIHtcclxuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59KSgpO1xyXG5cclxuLyogU3ViIGZ1bmN0aW9ucyAqL1xyXG5cclxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKGl0ZW0pID0+IHtcclxuICBpbWFnZVBvcHVwLm9wZW4oaXRlbS5saW5rLCBpdGVtLm5hbWUpO1xyXG59IFxyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sICcjY2FyZCcsICgpID0+IGhhbmRsZUNhcmRDbGljayhpdGVtKSk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuLyogUGFnZSBpbml0aWFsaXphdGlvbiAqL1xyXG5cclxuY29uc3QgY2FyZHNTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShyZW5kZXJDYXJkKGl0ZW0pKTtcclxuICB9XHJcbn0sICcuZ2FsbGVyeV9fbGlzdCcpO1xyXG5cclxuY2FyZHNTZWN0aW9uLnJlbmRlckNhcmRzKCk7XHJcblxyXG4vKiBDcmVhdGluZyBjbGFzc2VzIGluc3RhbmNlcyBhbmQgc2V0dGluZyBldmVudCBsaXN0ZW5lcnMgKi9cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKCcucHJvZmlsZV9fbmFtZScsICcucHJvZmlsZV9fYWJvdXQnKTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX3BpY3R1cmUnKTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfZWRpdCcsIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0VmFsdWVzKTtcclxufSwgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yKTtcclxuXHJcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9hZGQtY2FyZCcsIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gIGlucHV0VmFsdWVzLmFsdCA9IGBIZXJlIHdhcyBhIGJlYXV0aWZ1bCBwaWN0dXJlIG9mICR7aW5wdXRWYWx1ZXMubmFtZX1gO1xyXG4gIGNhcmRzU2VjdGlvbi5hZGRJdGVtKHJlbmRlckNhcmQoaW5wdXRWYWx1ZXMpKTtcclxufSwgYWRkRm9ybVZhbGlkYXRvcik7XHJcblxyXG4vKiBFdmVudCBsaXN0ZW5lcnMgZm9yIG9wZW5pbmcgbW9kYWwgd2luZG93cyAqL1xyXG5cclxuY29uc3QgZmlsbFByb2ZpbGVJbmZvRm9ybSA9ICgpID0+IHtcclxuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwb3B1cElucHV0TmFtZS52YWx1ZSA9IGluZm8ubmFtZTtcclxuICBwb3B1cElucHV0SW5mby52YWx1ZSA9IGluZm8uam9iO1xyXG59XHJcblxyXG4oZnVuY3Rpb24gc2V0TW9kYWxzRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgcHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBmaWxsUHJvZmlsZUluZm9Gb3JtKCk7XHJcbiAgICBlZGl0Rm9ybVBvcHVwLm9wZW4oKVxyXG4gIH0pO1xyXG5cclxuICBhZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gYWRkQ2FyZFBvcHVwLm9wZW4oKSk7XHJcbn0pKCk7XHJcblxyXG5cclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlY3Rpb25TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9zZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWN0aW9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9zZWN0aW9uLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJDYXJkcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBqb2JTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZUZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHsgbmFtZTogdGhpcy5fbmFtZUZpZWxkLnRleHRDb250ZW50LCBqb2I6IHRoaXMuX2pvYkZpZWxkLnRleHRDb250ZW50IH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyKSB7XHJcbiAgICB0aGlzLl9uYW1lRmllbGQudGV4dENvbnRlbnQgPSB1c2VyLm5hbWU7XHJcbiAgICB0aGlzLl9qb2JGaWVsZC50ZXh0Q29udGVudCA9IHVzZXIuaW5mbztcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihpbWFnZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGNvbnN0IHBvcHVwUGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1waWN0dXJlLWJveF9faW1hZ2UnKTtcclxuICAgIGNvbnN0IHBvcHVwQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1waWN0dXJlLWJveF9fY2FwdGlvbicpO1xyXG4gICAgcG9wdXBQaWN0dXJlLnNyYyA9IGltYWdlO1xyXG4gICAgcG9wdXBQaWN0dXJlLmFsdCA9IGBIZXJlIHdhcyBhIGJlYXV0aWZ1bCBwaWN0dXJlIG9mICR7ZGVzY3JpcHRpb259YDtcclxuICAgIHBvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJjb25maWdPYmplY3QiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFByb2ZpbGVGb3JtIiwicG9wdXBJbnB1dE5hbWUiLCJwb3B1cElucHV0SW5mbyIsImFkZENhcmRCdXR0b24iLCJhZGRDYXJkRm9ybSIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsImNhcmREYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRoaXMiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfaW1hZ2UiLCJsaW5rIiwiX3RpdGxlIiwibmFtZSIsIl9hbHQiLCJhbHQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZURlbGV0ZUNhcmRCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsImdlbmVyYXRlQ2FyZCIsImNhcmRJbWFnZSIsImNhcmREZXNjcmlwdGlvbiIsInNyYyIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9idXR0b25FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsImlucHV0IiwiX3NldEJ1dHRvblRvRGlzYWJsZWRTdGF0ZSIsImRpc2FibGVkIiwiX3NldEJ1dHRvblRvRW5hYmxlZFN0YXRlIiwiX2NoYW5nZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0Rm9ybVZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlTW91c2VDbGljayIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0IiwiZm9ybVZhbGlkYXRvciIsInN1cGVyIiwiaW5wdXRWYWx1ZXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaGFuZGxlU3VibWl0IiwiX2Zvcm1WYWxpZGF0b3IiLCJ2YWx1ZXNPYmplY3QiLCJ2YWx1ZSIsInJlc2V0IiwiX29uU3VibWl0IiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInJlbmRlckNhcmQiLCJpdGVtIiwiY2FyZCIsImltYWdlUG9wdXAiLCJjYXJkc1NlY3Rpb24iLCJzZWN0aW9uU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX3NlY3Rpb24iLCJhZGRJdGVtIiwicHJlcGVuZCIsInJlbmRlckNhcmRzIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRmllbGQiLCJfam9iRmllbGQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwidXNlciIsImluZm8iLCJpbWFnZSIsImRlc2NyaXB0aW9uIiwicG9wdXBQaWN0dXJlIiwicG9wdXBDYXB0aW9uIiwiZWRpdEZvcm1Qb3B1cCIsImFkZENhcmRQb3B1cCIsImZpbGxQcm9maWxlSW5mb0Zvcm0iXSwic291cmNlUm9vdCI6IiJ9