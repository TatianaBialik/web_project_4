!function(){"use strict";const e={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},t=document.querySelector(".profile__edit-button"),s=document.querySelector(".form_type_edit"),r=s.querySelector(".form__input_type_name"),n=s.querySelector(".form__input_type_info"),o=document.querySelector(".profile__add-button"),i=document.querySelector(".form_type_add-card"),a=document.querySelector(".form_type_edit-avatar"),l=document.querySelector(".profile__avatar");class c{constructor(e,t,s,r,n,o,i){this._image=e.link,this._title=e.name,this._alt=e.alt,this._likes=e.likes,this._id=e._id,this._userId=t,this._ownerId=s,this._cardSelector=r,this._handleCardClick=n,this._handleLikeButton=o,this._handleDeleteCardButton=i}getId(){return this._id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}isLiked(){return this._likes.find((e=>e._id===this._userId))}setLikes(e){this._likes=e;const t=this._likes.length;this._cardElement.querySelector(".card__like-counter").textContent=t,this.isLiked()?this._cardElement.querySelector(".card__like").classList.add("card__like_active"):this._cardElement.querySelector(".card__like").classList.remove("card__like_active")}deleteCard(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCardButton())),this._cardElement.querySelector(".card__like").addEventListener("click",this._handleLikeButton),this._cardElement.querySelector(".card__picture").addEventListener("click",this._handleCardClick)}generateCard(){this._cardElement=this._getTemplate();const e=this._cardElement.querySelector(".card__picture"),t=this._cardElement.querySelector(".card__description");this.setLikes(this._likes);const s=this._cardElement.querySelector(".card__delete-button");return this._userId!==this._ownerId&&s.classList.add("card__delete-button_disabled"),e.src=this._image,e.alt=this._alt,t.textContent=this._title,this._setEventListeners(),this._cardElement}}class d{constructor(e,t){this._config=e,this._formElement=t,this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector))}_showInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent="",t.classList.remove(this._config.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setButtonToDisabledState(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}_setButtonToEnabledState(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1}_changeButtonState(e){this._hasInvalidInput(e)?this._setButtonToDisabledState(this._buttonElement):this._setButtonToEnabledState(this._buttonElement)}_setEventListeners(){const e=Array.from(this._formElement.querySelectorAll(this._config.inputSelector));this._changeButtonState(e,this._buttonElement),e.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._changeButtonState(e,this._buttonElement)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>e.preventDefault)),this._setEventListeners()}resetFormValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._setButtonToDisabledState()}}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class u{constructor(e){_(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),_(this,"_handleMouseClick",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup_opened"),this._setEventListeners()}close(){this._popupElement.classList.remove("popup_opened"),this._removeEventListeners()}_setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleMouseClick),document.addEventListener("keydown",this._handleEscClose)}_removeEventListeners(){this._popupElement.removeEventListener("mousedown",this._handleMouseClick),document.removeEventListener("keydown",this._handleEscClose)}}class h extends u{constructor(e,t,s){super(e),this._handleSubmit=t,this._formValidator=s,this._formElement=this._popupElement.querySelector(".form")}getInputValues(){const e=Array.from(this._popupElement.querySelectorAll(".form__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}open(){super.open(),this._formValidator.resetFormValidation()}close(){super.close(),this._formElement.reset()}setEventListeners(){super._setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}}const m=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}getUserInfo(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}getInitialCards(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}addCard(e){let{name:t,link:s}=e;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}addLike(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}removeLike(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}deleteCard(e){return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers})}editProfilePhoto(e){return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}editProfileInfo(e){let{name:t,about:s}=e;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"c0d07090-8c80-49c2-aa7a-cd5677a34984","Content-Type":"application/json"}}),p=new d(e,s),E=new d(e,i),f=new d(e,a);let b;p.enableValidation(),E.enableValidation(),f.enableValidation();const v=e=>{const t=new c(e,L,e.owner._id,"#card",(()=>(e=>{k.open(e.link,e.name)})(e)),(()=>(e=>{e.isLiked()?m.removeLike(e.getId()).then((t=>{e.setLikes(t.likes)})):m.addLike(e.getId()).then((t=>{e.setLikes(t.likes)}))})(t)),(()=>(e=>{w.open(),b=e})(t)));return t.generateCard()},y=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._section=document.querySelector(t)}addItem(e){this._section.append(e)}renderCards(e){e.forEach((e=>{this._renderer(e)}))}}({renderer:e=>{y.addItem(v(e))}},".gallery__list");let L;Promise.all([m.getUserInfo(),m.getInitialCards()]).then((e=>{let[t,s]=e;L=t._id,S.setUserInfo(t),l.src=t.avatar,y.renderCards(s)}));const S=new class{constructor(e,t){this._nameField=document.querySelector(e),this._jobField=document.querySelector(t)}getUserInfo(){return{name:this._nameField.textContent,job:this._jobField.textContent}}setUserInfo(e){this._nameField.textContent=e.name,this._jobField.textContent=e.about}}(".profile__name",".profile__about"),k=new class extends u{constructor(e){super(e)}open(e,t){super.open();const s=document.querySelector(".popup-picture-box__image"),r=document.querySelector(".popup-picture-box__caption");s.src=e,s.alt="Here was a beautiful picture of ".concat(t),r.textContent=t}}(".popup_type_picture");function g(e){const t=e.textContent;return e.textContent="Saving...",t}const C=new h(".popup_type_edit",(()=>(e=>{const t=s.querySelector(".form__submit-button"),r=g(t);m.editProfileInfo(e.getInputValues()).then((e=>{S.setUserInfo(e)})).finally((()=>{e.close(),t.textContent=r}))})(C)),p);C.setEventListeners();const I=new h(".popup_type_add-card",(()=>(e=>{const t=e.getInputValues();t.alt="Here was a beautiful picture of ".concat(t.name);const s=i.querySelector(".form__submit-button"),r=g(s);m.addCard(t).then((e=>{y.addItem(v(e))})).finally((()=>{e.close(),s.textContent=r}))})(I)),E),q=new h(".popup_type_edit-avatar",(()=>(e=>{const t=a.querySelector(".form__submit-button"),s=g(t);m.editProfilePhoto(e.getInputValues().avatar).then((e=>{l.src=e.avatar})).finally((()=>{e.close(),t.textContent=s}))})(q)),f);q.setEventListeners();const w=new class extends u{constructor(e,t){super(e),this._submitFunction=t}setEventListeners(){super._setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitFunction()}))}}(".popup_type_delete-card",(()=>{return e=w,m.deleteCard(b.getId()).finally(e.close()),void b.deleteCard();var e}));w.setEventListeners(),t.addEventListener("click",(()=>{(()=>{const e=S.getUserInfo();r.value=e.name,n.value=e.job})(),C.open()})),o.addEventListener("click",(()=>I.open())),l.addEventListener("click",(()=>q.open()))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBRUEsTUFBTUEsRUFBZSxDQUNuQkMsYUFBYyxRQUNkQyxjQUFlLGVBQ2ZDLHFCQUFzQix1QkFDdEJDLG9CQUFxQiwrQkFDckJDLGdCQUFpQix5QkFDakJDLFdBQVksdUJBd0NSQyxFQUFvQkMsU0FBU0MsY0FBYyx5QkFDM0NDLEVBQWtCRixTQUFTQyxjQUFjLG1CQUN6Q0UsRUFBaUJELEVBQWdCRCxjQUFjLDBCQUMvQ0csRUFBaUJGLEVBQWdCRCxjQUFjLDBCQUkvQ0ksRUFBZ0JMLFNBQVNDLGNBQWMsd0JBQ3ZDSyxFQUFjTixTQUFTQyxjQUFjLHVCQUlyQ00sRUFBbUJQLFNBQVNDLGNBQWMsMEJBSTFDTyxFQUFTUixTQUFTQyxjQUFjLG9CQzNEdEMsTUFBTVEsRUFDSkMsWUFBWUMsRUFBVUMsRUFBUUMsRUFBU0MsRUFBa0JDLEVBQWlCQyxFQUFrQkMsR0FDMUZDLEtBQUtDLE9BQVNSLEVBQVNTLEtBQ3ZCRixLQUFLRyxPQUFTVixFQUFTVyxLQUN2QkosS0FBS0ssS0FBT1osRUFBU2EsSUFDckJOLEtBQUtPLE9BQVNkLEVBQVNlLE1BQ3ZCUixLQUFLUyxJQUFNaEIsRUFBU2dCLElBQ3BCVCxLQUFLVSxRQUFVaEIsRUFDZk0sS0FBS1csU0FBV2hCLEVBQ2hCSyxLQUFLWSxjQUFnQmhCLEVBQ3JCSSxLQUFLYSxpQkFBbUJoQixFQUN4QkcsS0FBS2Msa0JBQW9CaEIsRUFDekJFLEtBQUtlLHdCQUEwQmhCLEVBR2pDaUIsUUFDRSxPQUFPaEIsS0FBS1MsSUFHZFEsZUFDRSxPQUFPbkMsU0FBU0MsY0FBY2lCLEtBQUtZLGVBQWVNLFFBQVFuQyxjQUFjLFNBQVNvQyxXQUFVLEdBRzdGQyxVQUNFLE9BQU9wQixLQUFLTyxPQUFPYyxNQUFLQyxHQUFRQSxFQUFLYixNQUFRVCxLQUFLVSxVQUdwRGEsU0FBU2YsR0FDUFIsS0FBS08sT0FBU0MsRUFDZCxNQUFNZ0IsRUFBY3hCLEtBQUtPLE9BQU9rQixPQUNoQ3pCLEtBQUswQixhQUFhM0MsY0FBYyx1QkFBdUI0QyxZQUFjSCxFQUVsRXhCLEtBQUtvQixVQUNOcEIsS0FBSzBCLGFBQWEzQyxjQUFjLGVBQWU2QyxVQUFVQyxJQUFJLHFCQUU3RDdCLEtBQUswQixhQUFhM0MsY0FBYyxlQUFlNkMsVUFBVUUsT0FBTyxxQkFJckVDLGFBQ0cvQixLQUFLMEIsYUFBYUksU0FDbEI5QixLQUFLMEIsYUFBZSxLQUd0Qk0scUJBQzJCaEMsS0FBSzBCLGFBQWEzQyxjQUFjLHdCQUN4Q2tELGlCQUFpQixTQUFTLElBQU1qQyxLQUFLZSw0QkFFbkNmLEtBQUswQixhQUFhM0MsY0FBYyxlQUN4Q2tELGlCQUFpQixRQUFTakMsS0FBS2MsbUJBRTFDZCxLQUFLMEIsYUFBYTNDLGNBQWMsa0JBQWtCa0QsaUJBQWlCLFFBQVNqQyxLQUFLYSxrQkFHbkZxQixlQUNFbEMsS0FBSzBCLGFBQWUxQixLQUFLaUIsZUFFekIsTUFBTWtCLEVBQVluQyxLQUFLMEIsYUFBYTNDLGNBQWMsa0JBQzVDcUQsRUFBa0JwQyxLQUFLMEIsYUFBYTNDLGNBQWMsc0JBRXhEaUIsS0FBS3VCLFNBQVN2QixLQUFLTyxRQUVuQixNQUFNOEIsRUFBbUJyQyxLQUFLMEIsYUFBYTNDLGNBQWMsd0JBVXpELE9BVEtpQixLQUFLVSxVQUFZVixLQUFLVyxVQUN6QjBCLEVBQWlCVCxVQUFVQyxJQUFJLGdDQUdqQ00sRUFBVUcsSUFBTXRDLEtBQUtDLE9BQ3JCa0MsRUFBVTdCLElBQU1OLEtBQUtLLEtBQ3JCK0IsRUFBZ0JULFlBQWMzQixLQUFLRyxPQUNuQ0gsS0FBS2dDLHFCQUVFaEMsS0FBSzBCLGNDM0VULE1BQU1hLEVBQ1gvQyxZQUFZbEIsRUFBY2tFLEdBQ3hCeEMsS0FBS3lDLFFBQVVuRSxFQUNmMEIsS0FBSzBDLGFBQWVGLEVBQ3BCeEMsS0FBSzJDLGVBQWlCM0MsS0FBSzBDLGFBQWEzRCxjQUFjaUIsS0FBS3lDLFFBQVFoRSxzQkFDbkV1QixLQUFLNEMsV0FBYUMsTUFBTUMsS0FBSzlDLEtBQUswQyxhQUFhSyxpQkFBaUIvQyxLQUFLeUMsUUFBUWpFLGdCQUcvRXdFLGdCQUFpQkMsR0FDZixNQUFNQyxFQUFlbEQsS0FBSzBDLGFBQWEzRCxjQUFsQixXQUFvQ2tFLEVBQWFFLEdBQWpELFdBQ3JCRixFQUFhckIsVUFBVUMsSUFBSTdCLEtBQUt5QyxRQUFROUQsaUJBQ3hDdUUsRUFBYXZCLFlBQWNzQixFQUFhRyxrQkFDeENGLEVBQWF0QixVQUFVQyxJQUFJN0IsS0FBS3lDLFFBQVE3RCxZQUcxQ3lFLGdCQUFpQkosR0FDZixNQUFNQyxFQUFlbEQsS0FBSzBDLGFBQWEzRCxjQUFsQixXQUFvQ2tFLEVBQWFFLEdBQWpELFdBQ3JCRixFQUFhckIsVUFBVUUsT0FBTzlCLEtBQUt5QyxRQUFROUQsaUJBQzNDdUUsRUFBYXZCLFlBQWMsR0FDM0J1QixFQUFhdEIsVUFBVUUsT0FBTzlCLEtBQUt5QyxRQUFRN0QsWUFHN0MwRSxvQkFBcUJMLEdBQ2RBLEVBQWFNLFNBQVNDLE1BR3pCeEQsS0FBS3FELGdCQUFnQkosR0FGckJqRCxLQUFLZ0QsZ0JBQWdCQyxHQU16QlEsbUJBQ0UsT0FBT3pELEtBQUs0QyxXQUFXYyxNQUFNQyxJQUNuQkEsRUFBTUosU0FBU0MsUUFJM0JJLDRCQUNFNUQsS0FBSzJDLGVBQWVmLFVBQVVDLElBQUk3QixLQUFLeUMsUUFBUS9ELHFCQUMvQ3NCLEtBQUsyQyxlQUFla0IsVUFBVyxFQUdqQ0MsMkJBQ0U5RCxLQUFLMkMsZUFBZWYsVUFBVUUsT0FBTzlCLEtBQUt5QyxRQUFRL0QscUJBQ2xEc0IsS0FBSzJDLGVBQWVrQixVQUFXLEVBR2pDRSxtQkFBb0JDLEdBQ2RoRSxLQUFLeUQsaUJBQWlCTyxHQUN4QmhFLEtBQUs0RCwwQkFBMEI1RCxLQUFLMkMsZ0JBRXBDM0MsS0FBSzhELHlCQUF5QjlELEtBQUsyQyxnQkFJdkNYLHFCQUNFLE1BQU1nQyxFQUFZbkIsTUFBTUMsS0FBSzlDLEtBQUswQyxhQUFhSyxpQkFBaUIvQyxLQUFLeUMsUUFBUWpFLGdCQUM3RXdCLEtBQUsrRCxtQkFBbUJDLEVBQVdoRSxLQUFLMkMsZ0JBRXhDcUIsRUFBVUMsU0FBU2hCLElBQ2pCQSxFQUFhaEIsaUJBQWlCLFNBQVMsS0FDckNqQyxLQUFLc0Qsb0JBQW9CTCxHQUN6QmpELEtBQUsrRCxtQkFBbUJDLEVBQVdoRSxLQUFLMkMsc0JBSzlDdUIsbUJBQ0VsRSxLQUFLMEMsYUFBYVQsaUJBQWlCLFVBQVdrQyxHQUFRQSxFQUFJQyxpQkFDMURwRSxLQUFLZ0MscUJBR1BxQyxzQkFDRXJFLEtBQUs0QyxXQUFXcUIsU0FBU2hCLElBQ3ZCakQsS0FBS3FELGdCQUFpQkosTUFFeEJqRCxLQUFLNEQsNkIsd0hDN0VGLE1BQU1VLEVBQ1g5RSxZQUFZK0UsR0FBZSwwQkFjUkosSUFDRCxXQUFaQSxFQUFJSyxLQUNOeEUsS0FBS3lFLFdBaEJrQiw0QkFvQk5OLEtBQ2ZBLEVBQUlPLE9BQU85QyxVQUFVK0MsU0FBUyxVQUFZUixFQUFJTyxPQUFPOUMsVUFBVStDLFNBQVMseUJBQzFFM0UsS0FBS3lFLFdBckJQekUsS0FBSzRFLGNBQWdCOUYsU0FBU0MsY0FBY3dGLEdBRzlDTSxPQUNFN0UsS0FBSzRFLGNBQWNoRCxVQUFVQyxJQUFJLGdCQUNqQzdCLEtBQUtnQyxxQkFHUHlDLFFBQ0V6RSxLQUFLNEUsY0FBY2hELFVBQVVFLE9BQU8sZ0JBQ3BDOUIsS0FBSzhFLHdCQWVQOUMscUJBQ0VoQyxLQUFLNEUsY0FBYzNDLGlCQUFpQixZQUFhakMsS0FBSytFLG1CQUN0RGpHLFNBQVNtRCxpQkFBaUIsVUFBV2pDLEtBQUtnRixpQkFHNUNGLHdCQUNFOUUsS0FBSzRFLGNBQWNLLG9CQUFvQixZQUFhakYsS0FBSytFLG1CQUN6RGpHLFNBQVNtRyxvQkFBb0IsVUFBV2pGLEtBQUtnRixrQkNoQzFDLE1BQU1FLFVBQXNCWixFQUNqQzlFLFlBQVkrRSxFQUFlWSxFQUFjQyxHQUN2Q0MsTUFBTWQsR0FDTnZFLEtBQUtzRixjQUFnQkgsRUFDckJuRixLQUFLdUYsZUFBaUJILEVBQ3RCcEYsS0FBSzBDLGFBQWUxQyxLQUFLNEUsY0FBYzdGLGNBQWMsU0FHdkR5RyxpQkFDRSxNQUFNeEIsRUFBWW5CLE1BQU1DLEtBQUs5QyxLQUFLNEUsY0FBYzdCLGlCQUFpQixpQkFDM0QwQyxFQUFlLEdBSXJCLE9BSEF6QixFQUFVQyxTQUFRTixJQUNoQjhCLEVBQWE5QixFQUFNdkQsTUFBUXVELEVBQU0rQixTQUU1QkQsRUFHVFosT0FDRVEsTUFBTVIsT0FDTjdFLEtBQUt1RixlQUFlbEIsc0JBR3RCSSxRQUNFWSxNQUFNWixRQUNOekUsS0FBSzBDLGFBQWFpRCxRQUdwQkMsb0JBQ0VQLE1BQU1yRCxxQkFDTmhDLEtBQUs0RSxjQUFjM0MsaUJBQWlCLFVBQVdrQyxJQUM3Q0EsRUFBSUMsaUJBQ0pwRSxLQUFLc0Ysb0JDbURKLE1BQU1PLEVBQU0sSUFwRm5CLE1BQ0VyRyxZQUFZc0csR0FDVjlGLEtBQUsrRixTQUFXRCxFQUFRRSxRQUN4QmhHLEtBQUtpRyxTQUFXSCxFQUFRSSxRQUcxQkMsY0FDRSxPQUFPQyxNQUFNcEcsS0FBSytGLFNBQVcsWUFBYSxDQUN4Q0csUUFBU2xHLEtBQUtpRyxXQUViSSxNQUFLQyxHQUFPQSxFQUFJQyxHQUFLRCxFQUFJRSxPQUFTQyxRQUFRQyxPQUFSLGlCQUF5QkosRUFBSUssV0FDL0RDLE9BQU1DLEdBQU9DLFFBQVFDLElBQUlGLEtBRzlCRyxrQkFDRSxPQUFPWixNQUFNcEcsS0FBSytGLFNBQVcsU0FBVSxDQUFDRyxRQUFTbEcsS0FBS2lHLFdBQ25ESSxNQUFLQyxHQUFPQSxFQUFJQyxHQUFLRCxFQUFJRSxPQUFTQyxRQUFRQyxPQUFSLGlCQUF5QkosRUFBSUssV0FDL0RDLE9BQU1DLEdBQU9DLFFBQVFDLElBQUlGLEtBRzlCSSxRQUFRLEdBQWEsSUFBYixLQUFDN0csRUFBRCxLQUFNRixHQUFPLEVBQ25CLE9BQU9rRyxNQUFNcEcsS0FBSytGLFNBQVcsU0FBVSxDQUNyQ21CLE9BQVEsT0FDUmhCLFFBQVNsRyxLQUFLaUcsU0FDZGtCLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJqSCxPQUNBRixXQUdIbUcsTUFBS0MsR0FBT0EsRUFBSUMsR0FBS0QsRUFBSUUsT0FBU0MsUUFBUUMsT0FBUixpQkFBeUJKLEVBQUlLLFdBQy9EQyxPQUFNQyxHQUFPQyxRQUFRQyxJQUFJRixLQUc1QlMsUUFBUW5FLEdBQ04sT0FBT2lELE1BQU1wRyxLQUFLK0YsU0FBVyxnQkFBa0I1QyxFQUFJLENBQ2pEK0QsT0FBUSxNQUNSaEIsUUFBU2xHLEtBQUtpRyxXQUVmSSxNQUFLQyxHQUFPQSxFQUFJQyxHQUFLRCxFQUFJRSxPQUFTQyxRQUFRQyxPQUFSLGlCQUF5QkosRUFBSUssV0FDL0RDLE9BQU1DLEdBQU9DLFFBQVFDLElBQUlGLEtBRzVCVSxXQUFXcEUsR0FDVCxPQUFPaUQsTUFBTXBHLEtBQUsrRixTQUFXLGdCQUFrQjVDLEVBQUksQ0FDakQrRCxPQUFRLFNBQ1JoQixRQUFTbEcsS0FBS2lHLFdBRWZJLE1BQUtDLEdBQU9BLEVBQUlDLEdBQUtELEVBQUlFLE9BQVNDLFFBQVFDLE9BQVIsaUJBQXlCSixFQUFJSyxXQUMvREMsT0FBTUMsR0FBT0MsUUFBUUMsSUFBSUYsS0FHNUI5RSxXQUFXb0IsR0FDVCxPQUFPaUQsTUFBTXBHLEtBQUsrRixTQUFXLFVBQVk1QyxFQUFJLENBQzNDK0QsT0FBUSxTQUNSaEIsUUFBU2xHLEtBQUtpRyxXQUlsQnVCLGlCQUFpQmxJLEdBQ2YsT0FBTzhHLE1BQU1wRyxLQUFLK0YsU0FBVyxtQkFBb0IsQ0FDL0NtQixPQUFRLFFBQ1JoQixRQUFTbEcsS0FBS2lHLFNBQ2RrQixLQUFNQyxLQUFLQyxVQUFVLENBQ25CL0gsYUFHSCtHLE1BQUtDLEdBQU9BLEVBQUlDLEdBQUtELEVBQUlFLE9BQVNDLFFBQVFDLE9BQVIsaUJBQXlCSixFQUFJSyxXQUMvREMsT0FBTUMsR0FBT0MsUUFBUUMsSUFBSUYsS0FHNUJZLGdCQUFnQixHQUFjLElBQWQsS0FBQ3JILEVBQUQsTUFBTXNILEdBQVEsRUFDNUIsT0FBT3RCLE1BQU1wRyxLQUFLK0YsU0FBVyxZQUFhLENBQ3hDbUIsT0FBUSxRQUNSaEIsUUFBU2xHLEtBQUtpRyxTQUNka0IsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQmpILE9BQ0FzSCxZQUdIckIsTUFBTUMsR0FBT0EsRUFBSUMsR0FBS0QsRUFBSUUsT0FBU0MsUUFBUUMsT0FBUixpQkFBeUJKLEVBQUlLLFdBQ2hFQyxPQUFNQyxHQUFPQyxRQUFRQyxJQUFJRixPQUlILENBQ3pCYixRQUFTLGlEQUNURSxRQUFTLENBQ1B5QixjQUFlLHVDQUNmLGVBQWdCLHNCQ2pFZEMsRUFBMkIsSUFBSXJGLEVBQWNqRSxFQUFhVSxHQUMxRDZJLEVBQW1CLElBQUl0RixFQUFjakUsRUFBY2MsR0FDbkQwSSxFQUE0QixJQUFJdkYsRUFBY2pFLEVBQWFlLEdBNEJqRSxJQUFJMEksRUF6QkZILEVBQXlCMUQsbUJBQ3pCMkQsRUFBaUIzRCxtQkFDakI0RCxFQUEwQjVELG1CQXdCNUIsTUFLTThELEVBQWNDLElBQ2xCLE1BQU1DLEVBQU8sSUFBSTNJLEVBQ2YwSSxFQUNBdkksRUFDQXVJLEVBQUtFLE1BQU0xSCxJQUNYLFNBQ0EsSUE5QnFCd0gsS0FDdkJHLEVBQVd2RCxLQUFLb0QsRUFBSy9ILEtBQU0rSCxFQUFLN0gsT0E2QnhCUCxDQUFnQm9JLEtBQ3RCLElBM0JzQkMsS0FDcEJBLEVBQUs5RyxVQUNQeUUsRUFBSTBCLFdBQVdXLEVBQUtsSCxTQUNqQnFGLE1BQUtDLElBQ0o0QixFQUFLM0csU0FBUytFLEVBQUk5RixVQUd0QnFGLEVBQUl5QixRQUFRWSxFQUFLbEgsU0FDZHFGLE1BQUtDLElBQ0o0QixFQUFLM0csU0FBUytFLEVBQUk5RixXQWtCaEJWLENBQWlCb0ksS0FDdkIsSUFiNEJBLEtBQzlCRyxFQUEwQnhELE9BQzFCa0QsRUFBZUcsR0FXUG5JLENBQXVCbUksS0FHL0IsT0FEb0JBLEVBQUtoRyxnQkFNckJvRyxFQUFlLElDM0VkLE1BQ0w5SSxZQUFZLEVBQWMrSSxHQUFpQixJQUEvQixTQUFFQyxHQUE2QixFQUN6Q3hJLEtBQUt5SSxVQUFZRCxFQUNqQnhJLEtBQUswSSxTQUFXNUosU0FBU0MsY0FBY3dKLEdBR3pDSSxRQUFRVixHQUNOakksS0FBSzBJLFNBQVNFLE9BQU9YLEdBR3ZCWSxZQUFZQyxHQUNWQSxFQUFNN0UsU0FBUWdFLElBQ1pqSSxLQUFLeUksVUFBVVIsUUQrRFksQ0FDL0JPLFNBQVdQLElBQ1RLLEVBQWFLLFFBQVFYLEVBQVdDLE1BR2pDLGtCQUVILElBQUl2SSxFQUVKK0csUUFBUXNDLElBQUksQ0FBQ2xELEVBQUlNLGNBQWVOLEVBQUltQixvQkFDakNYLE1BQUssSUFBdUIsSUFBckIyQyxFQUFVQyxHQUFXLEVBQzNCdkosRUFBU3NKLEVBQVN2SSxJQUNsQnlJLEVBQVNDLFlBQVlILEdBQ3JCMUosRUFBT2dELElBQU0wRyxFQUFTMUosT0FFdEJnSixFQUFhTyxZQUFZSSxNQUs3QixNQUFNQyxFQUFXLElFL0ZWLE1BQ0wxSixZQUFZNEosRUFBY0MsR0FDeEJySixLQUFLc0osV0FBYXhLLFNBQVNDLGNBQWNxSyxHQUN6Q3BKLEtBQUt1SixVQUFZekssU0FBU0MsY0FBY3NLLEdBRzFDbEQsY0FDRSxNQUFPLENBQUUvRixLQUFNSixLQUFLc0osV0FBVzNILFlBQWE2SCxJQUFLeEosS0FBS3VKLFVBQVU1SCxhQUdsRXdILFlBQVk3SCxHQUNWdEIsS0FBS3NKLFdBQVczSCxZQUFjTCxFQUFLbEIsS0FDbkNKLEtBQUt1SixVQUFVNUgsWUFBY0wsRUFBS29HLFFGbUZSLGlCQUFrQixtQkFFMUNVLEVBQWEsSUcvRlosY0FBNkI5RCxFQUNsQzlFLFlBQVkrRSxHQUNWYyxNQUFNZCxHQUdSTSxLQUFLNEUsRUFBT0MsR0FDVnJFLE1BQU1SLE9BQ04sTUFBTThFLEVBQWU3SyxTQUFTQyxjQUFjLDZCQUN0QzZLLEVBQWU5SyxTQUFTQyxjQUFjLCtCQUM1QzRLLEVBQWFySCxJQUFNbUgsRUFDbkJFLEVBQWFySixJQUFiLDBDQUFzRG9KLEdBQ3RERSxFQUFhakksWUFBYytILElIb0ZPLHVCQUV0QyxTQUFTRyxFQUFjQyxHQUNyQixNQUFNQyxFQUFhRCxFQUFPbkksWUFFMUIsT0FEQW1JLEVBQU9uSSxZQUFjLFlBQ2RvSSxFQUdULE1BY01DLEVBQWdCLElBQUk5RSxFQUN4QixvQkFDQSxJQWhCNEIrRSxLQUM1QixNQUFNQyxFQUFhbEwsRUFBZ0JELGNBQWMsd0JBQzNDb0wsRUFBaUJOLEVBQWNLLEdBRXJDckUsRUFBSTRCLGdCQUFnQndDLEVBQU16RSxrQkFDdkJhLE1BQUtDLElBQ0o0QyxFQUFTQyxZQUFZN0MsTUFFdEI4RCxTQUFRLEtBQ1BILEVBQU14RixRQUNOeUYsRUFBV3ZJLFlBQWN3SSxNQU12QkUsQ0FBcUJMLElBQzNCcEMsR0FDRm9DLEVBQWNwRSxvQkFFZCxNQWlCTTBFLEVBQWUsSUFBSXBGLEVBQ3ZCLHdCQUNBLElBbkIrQitFLEtBQy9CLE1BQU1NLEVBQWdCTixFQUFNekUsaUJBQzVCK0UsRUFBY2pLLElBQWQsMENBQXVEaUssRUFBY25LLE1BRXJFLE1BQU04SixFQUFhOUssRUFBWUwsY0FBYyx3QkFDdkNvTCxFQUFpQk4sRUFBY0ssR0FFckNyRSxFQUFJb0IsUUFBUXNELEdBQ1RsRSxNQUFLQyxJQUNKZ0MsRUFBYUssUUFBUVgsRUFBVzFCLE9BRWpDOEQsU0FBUSxLQUNQSCxFQUFNeEYsUUFDTnlGLEVBQVd2SSxZQUFjd0ksTUFNdkJLLENBQXdCRixJQUM5QnpDLEdBZ0JJNEMsRUFBb0IsSUFBSXZGLEVBQzVCLDJCQUNBLElBaEJzQytFLEtBQ3BDLE1BQU1DLEVBQWE3SyxFQUFpQk4sY0FBYyx3QkFDNUNvTCxFQUFpQk4sRUFBY0ssR0FFckNyRSxFQUFJMkIsaUJBQWlCeUMsRUFBTXpFLGlCQUFpQmxHLFFBQ3pDK0csTUFBS0MsSUFDSmhILEVBQU9nRCxJQUFNZ0UsRUFBSWhILFVBRWxCOEssU0FBUSxLQUNQSCxFQUFNeEYsUUFDTnlGLEVBQVd2SSxZQUFjd0ksTUFNekJPLENBQTZCRCxJQUNuQzNDLEdBQ0YyQyxFQUFrQjdFLG9CQUVsQixNQU1NeUMsRUFBNEIsSUkzSzNCLGNBQW9DL0QsRUFDekM5RSxZQUFZK0UsRUFBZW9HLEdBQ3pCdEYsTUFBTWQsR0FDTnZFLEtBQUs0SyxnQkFBa0JELEVBR3pCL0Usb0JBQ0VQLE1BQU1yRCxxQkFDTmhDLEtBQUs0RSxjQUFjM0MsaUJBQWlCLFVBQVdrQyxJQUM3Q0EsRUFBSUMsaUJBQ0pwRSxLQUFLNEssdUJKa0tULDJCQUNBLEtBQU1DLE9BUjRCWixFQVFENUIsRUFQakN4QyxFQUFJOUQsV0FBV2dHLEVBQWEvRyxTQUN6Qm9KLFFBQVFILEVBQU14RixjQUNqQnNELEVBQWFoRyxhQUhxQmtJLFNBU3BDNUIsRUFBMEJ6QyxvQkFXeEIvRyxFQUFrQm9ELGlCQUFpQixTQUFTLEtBUGxCLE1BQzFCLE1BQU02SSxFQUFPNUIsRUFBUy9DLGNBQ3RCbEgsRUFBZXlHLE1BQVFvRixFQUFLMUssS0FDNUJsQixFQUFld0csTUFBUW9GLEVBQUt0QixLQUsxQnVCLEdBQ0FmLEVBQWNuRixVQUdoQjFGLEVBQWM4QyxpQkFBaUIsU0FBUyxJQUFNcUksRUFBYXpGLFNBRTNEdkYsRUFBTzJDLGlCQUFpQixTQUFTLElBQU13SSxFQUFrQjVGLFMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBGb3JtIHZhbGlkYXRpb24gb2JqZWN0ICovXHJcblxyXG5jb25zdCBjb25maWdPYmplY3QgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl92aXNpYmxlXCJcclxufVxyXG5cclxuLyogSW5pdGlhbCBjYXJkcyBhcnJheSovXHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgICBhbHQ6IFwiQSByaXZlciB3aXRoIGZvcmVzdCBvbiB0aGUgYmFua3MsIG1vdW50YWlucyBpbiB0aGUgYmFja2dyb3VuZFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkEgbGFrZSBzdXJyb3VuZGVkIGJ5IG1vdW50YWlucyBhbmQgZm9yZXN0XCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgICBhbHQ6IFwiU3VucmlzZSBhYm92ZSBkYXJrIGhpbGxzXCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgYWx0OiBcIlN0YXJyeSBuaWdodCwgbW91bnRhaW5zIHdpdGggcGllY2Ugb2Ygc25vd1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkNvYXN0IG9mIGxha2UsIG1vdW50YWlucyBvbiB0aGUgYmFja2dyb3VuZFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgICBhbHQ6IFwiU21hbGwgZG9jayB3aXRoIGxpdHRsZSBib2F0cyBvbiB0aGUgbW91bnRhaW4gbGFrZVwiXHJcbiAgfVxyXG5dO1xyXG5cclxuLyogRWRpdCBmb3JtIGNvbnN0YW50cyAqL1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fdHlwZV9lZGl0Jyk7XHJcbmNvbnN0IHBvcHVwSW5wdXROYW1lID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX25hbWUnKTtcclxuY29uc3QgcG9wdXBJbnB1dEluZm8gPSBlZGl0UHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfaW5mbycpO1xyXG5cclxuLyogQWRkIGNhcmQgZm9ybSBjb25zdGFudHMgKi9cclxuXHJcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5jb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfYWRkLWNhcmQnKTtcclxuXHJcbi8qIENoYW5nZSBwcm9maWxlIHBpY3R1cmUgZm9ybSBjb25zdGFudHMgKi9cclxuXHJcbmNvbnN0IGNoYW5nZUF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX2VkaXQtYXZhdGFyJyk7XHJcblxyXG4vKiBVc2VyIHByb2ZpbGUgKi9cclxuXHJcbmNvbnN0IGF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcclxuXHJcblxyXG5leHBvcnQgeyBcclxuICAgICAgICBjb25maWdPYmplY3QsIFxyXG4gICAgICAgIGluaXRpYWxDYXJkcywgXHJcbiAgICAgICAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgICAgICAgZWRpdFByb2ZpbGVGb3JtLFxyXG4gICAgICAgIHBvcHVwSW5wdXROYW1lLFxyXG4gICAgICAgIHBvcHVwSW5wdXRJbmZvLFxyXG4gICAgICAgIGFkZENhcmRCdXR0b24sXHJcbiAgICAgICAgYWRkQ2FyZEZvcm0sXHJcbiAgICAgICAgYXZhdGFyLFxyXG4gICAgICAgIGNoYW5nZUF2YXRhckZvcm1cclxuICAgICAgIH07IiwiLyogQ2xhc3MgQ2FyZDpcclxuLSBjcmVhdGluZyBhIGNhcmQgZWxlbWVudDtcclxuLSBjYXJkIGdlbmVyYXRpb247XHJcbi0gZXZlbnQgbGlzdGVuZXJzOiBsaWtlIGJ1dHRvbiwgZGVsZXRlIGJ1dHRvbiwgb3BlbiBtb2RhbCB3aW5kb3cgKi9cclxuXHJcbmNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCB1c2VySWQsIG93bmVySWQsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUJ1dHRvbiwgaGFuZGxlRGVsZXRlQ2FyZEJ1dHRvbikge1xyXG4gICAgdGhpcy5faW1hZ2UgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fdGl0bGUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fYWx0ID0gY2FyZERhdGEuYWx0O1xyXG4gICAgdGhpcy5fbGlrZXMgPSBjYXJkRGF0YS5saWtlcztcclxuICAgIHRoaXMuX2lkID0gY2FyZERhdGEuX2lkO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IG93bmVySWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b247XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkQnV0dG9uID0gaGFuZGxlRGVsZXRlQ2FyZEJ1dHRvbjtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJykuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5maW5kKHVzZXIgPT4gdXNlci5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICBzZXRMaWtlcyhsaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIGNvbnN0IGxpa2VzQW1vdW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtY291bnRlcicpLnRleHRDb250ZW50ID0gbGlrZXNBbW91bnQ7XHJcblxyXG4gICAgaWYodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKS5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKS5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiBkZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBkZWxldGVDYXJkQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZS1idXR0b24nKTtcclxuICAgIGRlbGV0ZUNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkQnV0dG9uKCkpO1xyXG5cclxuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xyXG4gICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19waWN0dXJlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fcGljdHVyZScpO1xyXG4gICAgY29uc3QgY2FyZERlc2NyaXB0aW9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2Rlc2NyaXB0aW9uJyk7XHJcblxyXG4gICAgdGhpcy5zZXRMaWtlcyh0aGlzLl9saWtlcyk7XHJcblxyXG4gICAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJyk7XHJcbiAgICBpZighKHRoaXMuX3VzZXJJZCA9PT0gdGhpcy5fb3duZXJJZCkpIHtcclxuICAgICAgY2FyZERlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19kZWxldGUtYnV0dG9uX2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX2FsdDtcclxuICAgIGNhcmREZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ2FyZCB9OyIsIi8qIENsYXNzIGZvciBmb3JtcyB2YWxpZGF0aW9uICovXHJcblxyXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnT2JqZWN0LCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnT2JqZWN0O1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgXHJcbiAgX2hpZGVJbnB1dEVycm9yIChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIFxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgX3NldEJ1dHRvblRvRGlzYWJsZWRTdGF0ZSAoKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG4gIFxyXG4gIF9zZXRCdXR0b25Ub0VuYWJsZWRTdGF0ZSAoKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuICBcclxuICBfY2hhbmdlQnV0dG9uU3RhdGUgKGlucHV0TGlzdCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuX3NldEJ1dHRvblRvRGlzYWJsZWRTdGF0ZSh0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3NldEJ1dHRvblRvRW5hYmxlZFN0YXRlKHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9jaGFuZ2VCdXR0b25TdGF0ZShpbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG4gIFxyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudClcclxuICAgICAgICB0aGlzLl9jaGFuZ2VCdXR0b25TdGF0ZShpbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgZW5hYmxlVmFsaWRhdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgXHJcbiAgcmVzZXRGb3JtVmFsaWRhdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yIChpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSlcclxuICAgIHRoaXMuX3NldEJ1dHRvblRvRGlzYWJsZWRTdGF0ZSgpO1xyXG4gIH1cclxufSIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVNb3VzZUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJykpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZU1vdXNlQ2xpY2spO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVNb3VzZUNsaWNrKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCwgZm9ybVZhbGlkYXRvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtVmFsaWRhdG9yID0gZm9ybVZhbGlkYXRvcjtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpKTtcclxuICAgIGNvbnN0IHZhbHVlc09iamVjdCA9IHt9O1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICB2YWx1ZXNPYmplY3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbHVlc09iamVjdDtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9mb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lJywge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApKVxyXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzJywge2hlYWRlcnM6IHRoaXMuX2hlYWRlcnN9KVxyXG4gICAgICAudGhlbihyZXMgPT4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApKVxyXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7bmFtZSxsaW5rfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayBcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApKVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzL2xpa2VzLycgKyBpZCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcy9saWtlcy8nICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpXHJcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvY2FyZHMvJyArIGlkLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZVBob3RvKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lL2F2YXRhcicsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZUluZm8oe25hbWUsYWJvdXR9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvdXNlcnMvbWUnLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgYWJvdXRcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbiAocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTMtZW4nLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiYzBkMDcwOTAtOGM4MC00OWMyLWFhN2EtY2Q1Njc3YTM0OTg0XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufSk7IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCB7IFxyXG4gICAgICAgIGNvbmZpZ09iamVjdCwgXHJcbiAgICAgICAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgICAgICAgZWRpdFByb2ZpbGVGb3JtLFxyXG4gICAgICAgIHBvcHVwSW5wdXROYW1lLFxyXG4gICAgICAgIHBvcHVwSW5wdXRJbmZvLFxyXG4gICAgICAgIGFkZENhcmRCdXR0b24sXHJcbiAgICAgICAgYWRkQ2FyZEZvcm0sXHJcbiAgICAgICAgYXZhdGFyLFxyXG4gICAgICAgIGNoYW5nZUF2YXRhckZvcm1cclxuICAgICAgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgeyBhcGkgfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcblxyXG4vKiBGb3JtcyB2YWxpZGF0aW9uICovXHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWdPYmplY3QsZWRpdFByb2ZpbGVGb3JtKTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZ09iamVjdCwgYWRkQ2FyZEZvcm0pO1xyXG5jb25zdCBjaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnT2JqZWN0LGNoYW5nZUF2YXRhckZvcm0pO1xyXG5cclxuKGZ1bmN0aW9uIHNldEZvcm1zVmFsaWRhdG9yKCkge1xyXG4gIGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgY2hhbmdlQXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pKCk7XHJcblxyXG4vKiBDYXJkIGhhbmRsZXJzIGFuZCByZW5kZXJpbmcgKi9cclxuXHJcbmNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChpdGVtKSA9PiB7XHJcbiAgaW1hZ2VQb3B1cC5vcGVuKGl0ZW0ubGluaywgaXRlbS5uYW1lKTtcclxufSBcclxuXHJcbmNvbnN0IGhhbmRsZUxpa2VCdXR0b24gPSAoY2FyZCkgPT4ge1xyXG4gIGlmIChjYXJkLmlzTGlrZWQoKSkge1xyXG4gICAgYXBpLnJlbW92ZUxpa2UoY2FyZC5nZXRJZCgpKVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGNhcmQuc2V0TGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgfSkgXHJcbiAgfSBlbHNlIHtcclxuICAgIGFwaS5hZGRMaWtlKGNhcmQuZ2V0SWQoKSlcclxuICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICBjYXJkLnNldExpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5sZXQgY2FyZFRvRGVsZXRlO1xyXG5jb25zdCBoYW5kbGVEZWxldGVDYXJkQnV0dG9uID0gKGNhcmQpID0+IHtcclxuICBkZWxldGVDYXJkU3VibWlzc2lvblBvcHVwLm9wZW4oKTtcclxuICBjYXJkVG9EZWxldGUgPSBjYXJkO1xyXG59XHJcblxyXG5jb25zdCByZW5kZXJDYXJkID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBpdGVtLCBcclxuICAgIHVzZXJJZCxcclxuICAgIGl0ZW0ub3duZXIuX2lkLFxyXG4gICAgJyNjYXJkJywgXHJcbiAgICAoKSA9PiBoYW5kbGVDYXJkQ2xpY2soaXRlbSksIFxyXG4gICAgKCkgPT4gaGFuZGxlTGlrZUJ1dHRvbihjYXJkKSxcclxuICAgICgpID0+IGhhbmRsZURlbGV0ZUNhcmRCdXR0b24oY2FyZClcclxuICApO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbi8qIFBhZ2UgaW5pdGlhbGl6YXRpb24gKi9cclxuXHJcbmNvbnN0IGNhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKHJlbmRlckNhcmQoaXRlbSkpO1xyXG4gICAgXHJcbiAgfVxyXG59LCAnLmdhbGxlcnlfX2xpc3QnKTtcclxuXHJcbmxldCB1c2VySWQ7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXHJcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICBhdmF0YXIuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xyXG5cclxuICAgIGNhcmRzU2VjdGlvbi5yZW5kZXJDYXJkcyhjYXJkcyk7XHJcbiAgfSlcclxuXHJcbi8qIENyZWF0aW5nIGNsYXNzZXMgaW5zdGFuY2VzIGFuZCBzZXR0aW5nIGV2ZW50IGxpc3RlbmVycyAqL1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oJy5wcm9maWxlX19uYW1lJywgJy5wcm9maWxlX19hYm91dCcpO1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfcGljdHVyZScpO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyTG9hZGluZyhidXR0b24pIHtcclxuICBjb25zdCBidXR0b25UZXh0ID0gYnV0dG9uLnRleHRDb250ZW50O1xyXG4gIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZpbmcuLi4nO1xyXG4gIHJldHVybiBidXR0b25UZXh0O1xyXG59XHJcblxyXG5jb25zdCBoYW5kbGVFZGl0U3VibWlzc2lvbiA9IChwb3B1cCkgPT4ge1xyXG4gIGNvbnN0IGZvcm1CdXR0b24gPSBlZGl0UHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdC1idXR0b24nKVxyXG4gIGNvbnN0IGZvcm1CdXR0b25UZXh0ID0gcmVuZGVyTG9hZGluZyhmb3JtQnV0dG9uKTtcclxuXHJcbiAgYXBpLmVkaXRQcm9maWxlSW5mbyhwb3B1cC5nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIGZvcm1CdXR0b24udGV4dENvbnRlbnQgPSBmb3JtQnV0dG9uVGV4dFxyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgZWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICcucG9wdXBfdHlwZV9lZGl0JywgXHJcbiAgKCkgPT4gaGFuZGxlRWRpdFN1Ym1pc3Npb24oZWRpdEZvcm1Qb3B1cCksIFxyXG4gIGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvcik7XHJcbmVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGhhbmRsZUFkZENhcmRTdWJtaXNzaW9uID0gKHBvcHVwKSA9PiB7XHJcbiAgY29uc3QgbmV3Q2FyZFZhbHVlcyA9IHBvcHVwLmdldElucHV0VmFsdWVzKCk7XHJcbiAgbmV3Q2FyZFZhbHVlcy5hbHQgPSBgSGVyZSB3YXMgYSBiZWF1dGlmdWwgcGljdHVyZSBvZiAke25ld0NhcmRWYWx1ZXMubmFtZX1gO1xyXG5cclxuICBjb25zdCBmb3JtQnV0dG9uID0gYWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdC1idXR0b24nKVxyXG4gIGNvbnN0IGZvcm1CdXR0b25UZXh0ID0gcmVuZGVyTG9hZGluZyhmb3JtQnV0dG9uKTtcclxuXHJcbiAgYXBpLmFkZENhcmQobmV3Q2FyZFZhbHVlcylcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKHJlbmRlckNhcmQocmVzKSlcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIGZvcm1CdXR0b24udGV4dENvbnRlbnQgPSBmb3JtQnV0dG9uVGV4dDtcclxuICAgIH0pXHJcbn1cclxuXHJcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICcucG9wdXBfdHlwZV9hZGQtY2FyZCcsIFxyXG4gICgpID0+IGhhbmRsZUFkZENhcmRTdWJtaXNzaW9uKGFkZENhcmRQb3B1cCksIFxyXG4gIGFkZEZvcm1WYWxpZGF0b3IpO1xyXG5cclxuICBjb25zdCBoYW5kbGVDaGFuZ2VBdmF0YXJTdWJtaXNzaW9uID0gKHBvcHVwKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtQnV0dG9uID0gY2hhbmdlQXZhdGFyRm9ybS5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fc3VibWl0LWJ1dHRvbicpXHJcbiAgICBjb25zdCBmb3JtQnV0dG9uVGV4dCA9IHJlbmRlckxvYWRpbmcoZm9ybUJ1dHRvbik7XHJcblxyXG4gICAgYXBpLmVkaXRQcm9maWxlUGhvdG8ocG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKS5hdmF0YXIpXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgYXZhdGFyLnNyYyA9IHJlcy5hdmF0YXI7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIGZvcm1CdXR0b24udGV4dENvbnRlbnQgPSBmb3JtQnV0dG9uVGV4dDtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG5jb25zdCBjaGFuZ2VBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICcucG9wdXBfdHlwZV9lZGl0LWF2YXRhcicsIFxyXG4gICgpID0+IGhhbmRsZUNoYW5nZUF2YXRhclN1Ym1pc3Npb24oY2hhbmdlQXZhdGFyUG9wdXApLCBcclxuICBjaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yKTtcclxuY2hhbmdlQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGhhbmRsZURlbGV0ZUNhcmRTdWJtaXNzaW9uID0gKHBvcHVwKSA9PiB7XHJcbiAgYXBpLmRlbGV0ZUNhcmQoY2FyZFRvRGVsZXRlLmdldElkKCkpXHJcbiAgICAuZmluYWxseShwb3B1cC5jbG9zZSgpKTtcclxuICBjYXJkVG9EZWxldGUuZGVsZXRlQ2FyZCgpO1xyXG59XHJcblxyXG5jb25zdCBkZWxldGVDYXJkU3VibWlzc2lvblBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcclxuICAnLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmQnLCBcclxuICAoKSA9PiBoYW5kbGVEZWxldGVDYXJkU3VibWlzc2lvbihkZWxldGVDYXJkU3VibWlzc2lvblBvcHVwKSk7XHJcbmRlbGV0ZUNhcmRTdWJtaXNzaW9uUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8qIEV2ZW50IGxpc3RlbmVycyBmb3Igb3BlbmluZyBtb2RhbCB3aW5kb3dzICovXHJcblxyXG5jb25zdCBmaWxsUHJvZmlsZUluZm9Gb3JtID0gKCkgPT4ge1xyXG4gIGNvbnN0IGluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHBvcHVwSW5wdXROYW1lLnZhbHVlID0gaW5mby5uYW1lO1xyXG4gIHBvcHVwSW5wdXRJbmZvLnZhbHVlID0gaW5mby5qb2I7XHJcbn1cclxuXHJcbihmdW5jdGlvbiBzZXRNb2RhbHNFdmVudExpc3RlbmVycygpIHtcclxuICBwcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGZpbGxQcm9maWxlSW5mb0Zvcm0oKTtcclxuICAgIGVkaXRGb3JtUG9wdXAub3BlbigpXHJcbiAgfSk7XHJcblxyXG4gIGFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBhZGRDYXJkUG9wdXAub3BlbigpKTtcclxuXHJcbiAgYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY2hhbmdlQXZhdGFyUG9wdXAub3BlbigpKTtcclxufSkoKTtcclxuXHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIHNlY3Rpb25TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX3NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlY3Rpb25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX3NlY3Rpb24uYXBwZW5kKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ2FyZHMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSlcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWVGaWVsZC50ZXh0Q29udGVudCwgam9iOiB0aGlzLl9qb2JGaWVsZC50ZXh0Q29udGVudCB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odXNlcikge1xyXG4gICAgdGhpcy5fbmFtZUZpZWxkLnRleHRDb250ZW50ID0gdXNlci5uYW1lO1xyXG4gICAgdGhpcy5fam9iRmllbGQudGV4dENvbnRlbnQgPSB1c2VyLmFib3V0O1xyXG4gIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGltYWdlLCBkZXNjcmlwdGlvbikge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgY29uc3QgcG9wdXBQaWN0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBpY3R1cmUtYm94X19pbWFnZScpO1xyXG4gICAgY29uc3QgcG9wdXBDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBpY3R1cmUtYm94X19jYXB0aW9uJyk7XHJcbiAgICBwb3B1cFBpY3R1cmUuc3JjID0gaW1hZ2U7XHJcbiAgICBwb3B1cFBpY3R1cmUuYWx0ID0gYEhlcmUgd2FzIGEgYmVhdXRpZnVsIHBpY3R1cmUgb2YgJHtkZXNjcmlwdGlvbn1gO1xyXG4gICAgcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0RnVuY3Rpb24pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0RnVuY3Rpb24gPSBzdWJtaXRGdW5jdGlvbjtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fc3VibWl0RnVuY3Rpb24oKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJjb25maWdPYmplY3QiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFByb2ZpbGVGb3JtIiwicG9wdXBJbnB1dE5hbWUiLCJwb3B1cElucHV0SW5mbyIsImFkZENhcmRCdXR0b24iLCJhZGRDYXJkRm9ybSIsImNoYW5nZUF2YXRhckZvcm0iLCJhdmF0YXIiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJjYXJkRGF0YSIsInVzZXJJZCIsIm93bmVySWQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUJ1dHRvbiIsImhhbmRsZURlbGV0ZUNhcmRCdXR0b24iLCJ0aGlzIiwiX2ltYWdlIiwibGluayIsIl90aXRsZSIsIm5hbWUiLCJfYWx0IiwiYWx0IiwiX2xpa2VzIiwibGlrZXMiLCJfaWQiLCJfdXNlcklkIiwiX293bmVySWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmRCdXR0b24iLCJnZXRJZCIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJpc0xpa2VkIiwiZmluZCIsInVzZXIiLCJzZXRMaWtlcyIsImxpa2VzQW1vdW50IiwibGVuZ3RoIiwiX2NhcmRFbGVtZW50IiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJkZWxldGVDYXJkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdlbmVyYXRlQ2FyZCIsImNhcmRJbWFnZSIsImNhcmREZXNjcmlwdGlvbiIsImNhcmREZWxldGVCdXR0b24iLCJzcmMiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX2J1dHRvbkVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiaW5wdXQiLCJfc2V0QnV0dG9uVG9EaXNhYmxlZFN0YXRlIiwiZGlzYWJsZWQiLCJfc2V0QnV0dG9uVG9FbmFibGVkU3RhdGUiLCJfY2hhbmdlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVzZXRGb3JtVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9yZW1vdmVFdmVudExpc3RlbmVycyIsIl9oYW5kbGVNb3VzZUNsaWNrIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJmb3JtVmFsaWRhdG9yIiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX2Zvcm1WYWxpZGF0b3IiLCJnZXRJbnB1dFZhbHVlcyIsInZhbHVlc09iamVjdCIsInZhbHVlIiwicmVzZXQiLCJzZXRFdmVudExpc3RlbmVycyIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJnZXRJbml0aWFsQ2FyZHMiLCJhZGRDYXJkIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsImVkaXRQcm9maWxlUGhvdG8iLCJlZGl0UHJvZmlsZUluZm8iLCJhYm91dCIsImF1dGhvcml6YXRpb24iLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiY2hhbmdlQXZhdGFyRm9ybVZhbGlkYXRvciIsImNhcmRUb0RlbGV0ZSIsInJlbmRlckNhcmQiLCJpdGVtIiwiY2FyZCIsIm93bmVyIiwiaW1hZ2VQb3B1cCIsImRlbGV0ZUNhcmRTdWJtaXNzaW9uUG9wdXAiLCJjYXJkc1NlY3Rpb24iLCJzZWN0aW9uU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9zZWN0aW9uIiwiYWRkSXRlbSIsImFwcGVuZCIsInJlbmRlckNhcmRzIiwiaXRlbXMiLCJhbGwiLCJ1c2VyRGF0YSIsImNhcmRzIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVGaWVsZCIsIl9qb2JGaWVsZCIsImpvYiIsImltYWdlIiwiZGVzY3JpcHRpb24iLCJwb3B1cFBpY3R1cmUiLCJwb3B1cENhcHRpb24iLCJyZW5kZXJMb2FkaW5nIiwiYnV0dG9uIiwiYnV0dG9uVGV4dCIsImVkaXRGb3JtUG9wdXAiLCJwb3B1cCIsImZvcm1CdXR0b24iLCJmb3JtQnV0dG9uVGV4dCIsImZpbmFsbHkiLCJoYW5kbGVFZGl0U3VibWlzc2lvbiIsImFkZENhcmRQb3B1cCIsIm5ld0NhcmRWYWx1ZXMiLCJoYW5kbGVBZGRDYXJkU3VibWlzc2lvbiIsImNoYW5nZUF2YXRhclBvcHVwIiwiaGFuZGxlQ2hhbmdlQXZhdGFyU3VibWlzc2lvbiIsInN1Ym1pdEZ1bmN0aW9uIiwiX3N1Ym1pdEZ1bmN0aW9uIiwiaGFuZGxlRGVsZXRlQ2FyZFN1Ym1pc3Npb24iLCJpbmZvIiwiZmlsbFByb2ZpbGVJbmZvRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=