!function(){"use strict";const e={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},t=document.querySelector(".profile__edit-button"),s=document.querySelector(".form_type_edit"),r=s.querySelector(".form__input_type_name"),n=s.querySelector(".form__input_type_info"),o=document.querySelector(".profile__add-button"),i=document.querySelector(".form_type_add-card"),a=document.querySelector(".form_type_edit-avatar"),l=document.querySelector(".profile__avatar");class c{constructor(e,t,s,r,n,o,i){this._image=e.link,this._title=e.name,this._alt=e.alt,this._likes=e.likes,this._id=e._id,this._userId=t,this._ownerId=s,this._cardSelector=r,this._handleCardClick=n,this._handleLikeButton=o,this._handleDeleteCardButton=i}getId(){return this._id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}isLiked(){return this._likes.find((e=>e._id===this._userId))}setLikes(e){this._likes=e;const t=this._likes.length;this._cardElement.querySelector(".card__like-counter").textContent=t,this.isLiked()?this._cardElement.querySelector(".card__like").classList.add("card__like_active"):this._cardElement.querySelector(".card__like").classList.remove("card__like_active")}deleteCard(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCardButton())),this._cardElement.querySelector(".card__like").addEventListener("click",this._handleLikeButton),this._cardElement.querySelector(".card__picture").addEventListener("click",this._handleCardClick)}generateCard(){this._cardElement=this._getTemplate();const e=this._cardElement.querySelector(".card__picture"),t=this._cardElement.querySelector(".card__description");this.setLikes(this._likes);const s=this._cardElement.querySelector(".card__delete-button");return this._userId!==this._ownerId&&s.classList.add("card__delete-button_disabled"),e.src=this._image,e.alt=this._alt,t.textContent=this._title,this._setEventListeners(),this._cardElement}}class d{constructor(e,t){this._config=e,this._formElement=t,this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector))}_showInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent="",t.classList.remove(this._config.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setButtonToDisabledState(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}_setButtonToEnabledState(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1}_changeButtonState(e){this._hasInvalidInput(e)?this._setButtonToDisabledState(this._buttonElement):this._setButtonToEnabledState(this._buttonElement)}_setEventListeners(){const e=Array.from(this._formElement.querySelectorAll(this._config.inputSelector));this._changeButtonState(e,this._buttonElement),e.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._changeButtonState(e,this._buttonElement)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>e.preventDefault)),this._setEventListeners()}resetFormValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._setButtonToDisabledState()}}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class u{constructor(e){_(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),_(this,"_handleMouseClick",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup_opened"),this._setEventListeners()}close(){this._popupElement.classList.remove("popup_opened"),this._removeEventListeners()}_setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleMouseClick),document.addEventListener("keydown",this._handleEscClose)}_removeEventListeners(){this._popupElement.removeEventListener("mousedown",this._handleMouseClick),document.removeEventListener("keydown",this._handleEscClose)}}class h extends u{constructor(e,t,s){super(e),this._handleSubmit=t,this._formValidator=s,this._formElement=this._popupElement.querySelector(".form")}getInputValues(){const e=Array.from(this._popupElement.querySelectorAll(".form__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}open(){super.open(),this._formValidator.resetFormValidation()}close(){super.close(),this._formElement.reset()}setEventListeners(){super._setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}}const m=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}getUserInfo(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}getInitialCards(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}addCard(e){let{name:t,link:s}=e;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}addLike(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}removeLike(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}deleteCard(e){return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers})}editProfilePhoto(e){return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}editProfileInfo(e){let{name:t,about:s}=e;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>console.log(e)))}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"c0d07090-8c80-49c2-aa7a-cd5677a34984","Content-Type":"application/json"}}),p=new d(e,s),E=new d(e,i),f=new d(e,a);let b;p.enableValidation(),E.enableValidation(),f.enableValidation();const v=e=>{const t=new c(e,L,e.owner._id,"#card",(()=>(e=>{k.open(e.link,e.name)})(e)),(()=>(e=>{e.isLiked()?m.removeLike(e.getId()).then((t=>{e.setLikes(t.likes)})):m.addLike(e.getId()).then((t=>{e.setLikes(t.likes)}))})(t)),(()=>(e=>{w.open(),b=e})(t)));return t.generateCard()},y=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._section=document.querySelector(t)}addItem(e){this._section.append(e)}renderCards(e){e.forEach((e=>{this._renderer(e)}))}}({renderer:e=>{y.addItem(v(e))}},".gallery__list");let L;Promise.all([m.getUserInfo(),m.getInitialCards()]).then((e=>{let[t,s]=e;L=t._id,S.setUserInfo(t),l.src=t.avatar,y.renderCards(s)}));const S=new class{constructor(e,t){this._nameField=document.querySelector(e),this._jobField=document.querySelector(t)}getUserInfo(){return{name:this._nameField.textContent,job:this._jobField.textContent}}setUserInfo(e){this._nameField.textContent=e.name,this._jobField.textContent=e.about}}(".profile__name",".profile__about"),k=new class extends u{constructor(e){super(e)}open(e,t){super.open();const s=document.querySelector(".popup-picture-box__image"),r=document.querySelector(".popup-picture-box__caption");s.src=e,s.alt="Here was a beautiful picture of ".concat(t),r.textContent=t}}(".popup_type_picture");function g(e){const t=e.textContent;return e.textContent="Saving...",t}const C=new h(".popup_type_edit",(()=>(e=>{const t=s.querySelector(".form__submit-button"),r=g(t);m.editProfileInfo(e.getInputValues()).then((e=>{S.setUserInfo(e)})).finally((()=>{e.close(),t.textContent=r}))})(C)),p);C.setEventListeners();const I=new h(".popup_type_add-card",(()=>(e=>{const t=e.getInputValues();t.alt="Here was a beautiful picture of ".concat(t.name);const s=i.querySelector(".form__submit-button"),r=g(s);m.addCard(t).then((e=>{y.addItem(v(e))})).finally((()=>{e.close(),s.textContent=r}))})(I)),E);I.setEventListeners();const q=new h(".popup_type_edit-avatar",(()=>(e=>{const t=a.querySelector(".form__submit-button"),s=g(t);m.editProfilePhoto(e.getInputValues().avatar).then((e=>{l.src=e.avatar})).finally((()=>{e.close(),t.textContent=s}))})(q)),f);q.setEventListeners();const w=new class extends u{constructor(e,t){super(e),this._submitFunction=t}setEventListeners(){super._setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitFunction()}))}}(".popup_type_delete-card",(()=>{return e=w,m.deleteCard(b.getId()).finally(e.close()),void b.deleteCard();var e}));w.setEventListeners(),t.addEventListener("click",(()=>{(()=>{const e=S.getUserInfo();r.value=e.name,n.value=e.job})(),C.open()})),o.addEventListener("click",(()=>I.open())),l.addEventListener("click",(()=>q.open()))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckQscUJBQ05oQyxLQUFLNEUsY0FBYzNDLGlCQUFpQixVQUFXa0MsSUFDN0NBLEVBQUlDLGlCQUNKcEUsS0FBSzRLLHVCSm1LVCwyQkFDQSxLQUFNQyxPQVI0QlosRUFRRDVCLEVBUGpDeEMsRUFBSTlELFdBQVdnRyxFQUFhL0csU0FDekJvSixRQUFRSCxFQUFNeEYsY0FDakJzRCxFQUFhaEcsYUFIcUJrSSxTQVNwQzVCLEVBQTBCekMsb0JBV3hCL0csRUFBa0JvRCxpQkFBaUIsU0FBUyxLQVBsQixNQUMxQixNQUFNNkksRUFBTzVCLEVBQVMvQyxjQUN0QmxILEVBQWV5RyxNQUFRb0YsRUFBSzFLLEtBQzVCbEIsRUFBZXdHLE1BQVFvRixFQUFLdEIsS0FLMUJ1QixHQUNBZixFQUFjbkYsVUFHaEIxRixFQUFjOEMsaUJBQWlCLFNBQVMsSUFBTXFJLEVBQWF6RixTQUUzRHZGLEVBQU8yQyxpQkFBaUIsU0FBUyxJQUFNd0ksRUFBa0I1RixTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogRm9ybSB2YWxpZGF0aW9uIG9iamVjdCAqL1xyXG5cclxuY29uc3QgY29uZmlnT2JqZWN0ID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3JfdmlzaWJsZVwiXHJcbn1cclxuXHJcbi8qIEluaXRpYWwgY2FyZHMgYXJyYXkqL1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkEgcml2ZXIgd2l0aCBmb3Jlc3Qgb24gdGhlIGJhbmtzLCBtb3VudGFpbnMgaW4gdGhlIGJhY2tncm91bmRcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICAgIGFsdDogXCJBIGxha2Ugc3Vycm91bmRlZCBieSBtb3VudGFpbnMgYW5kIGZvcmVzdFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgYWx0OiBcIlN1bnJpc2UgYWJvdmUgZGFyayBoaWxsc1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICAgIGFsdDogXCJTdGFycnkgbmlnaHQsIG1vdW50YWlucyB3aXRoIHBpZWNlIG9mIHNub3dcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICAgIGFsdDogXCJDb2FzdCBvZiBsYWtlLCBtb3VudGFpbnMgb24gdGhlIGJhY2tncm91bmRcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gICAgYWx0OiBcIlNtYWxsIGRvY2sgd2l0aCBsaXR0bGUgYm9hdHMgb24gdGhlIG1vdW50YWluIGxha2VcIlxyXG4gIH1cclxuXTtcclxuXHJcbi8qIEVkaXQgZm9ybSBjb25zdGFudHMgKi9cclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfZWRpdCcpO1xyXG5jb25zdCBwb3B1cElucHV0TmFtZSA9IGVkaXRQcm9maWxlRm9ybS5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faW5wdXRfdHlwZV9uYW1lJyk7XHJcbmNvbnN0IHBvcHVwSW5wdXRJbmZvID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX2luZm8nKTtcclxuXHJcbi8qIEFkZCBjYXJkIGZvcm0gY29uc3RhbnRzICovXHJcblxyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX2FkZC1jYXJkJyk7XHJcblxyXG4vKiBDaGFuZ2UgcHJvZmlsZSBwaWN0dXJlIGZvcm0gY29uc3RhbnRzICovXHJcblxyXG5jb25zdCBjaGFuZ2VBdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fdHlwZV9lZGl0LWF2YXRhcicpO1xyXG5cclxuLyogVXNlciBwcm9maWxlICovXHJcblxyXG5jb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XHJcblxyXG5cclxuZXhwb3J0IHsgXHJcbiAgICAgICAgY29uZmlnT2JqZWN0LCBcclxuICAgICAgICBpbml0aWFsQ2FyZHMsIFxyXG4gICAgICAgIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gICAgICAgIGVkaXRQcm9maWxlRm9ybSxcclxuICAgICAgICBwb3B1cElucHV0TmFtZSxcclxuICAgICAgICBwb3B1cElucHV0SW5mbyxcclxuICAgICAgICBhZGRDYXJkQnV0dG9uLFxyXG4gICAgICAgIGFkZENhcmRGb3JtLFxyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgICBjaGFuZ2VBdmF0YXJGb3JtXHJcbiAgICAgICB9OyIsIi8qIENsYXNzIENhcmQ6XHJcbi0gY3JlYXRpbmcgYSBjYXJkIGVsZW1lbnQ7XHJcbi0gY2FyZCBnZW5lcmF0aW9uO1xyXG4tIGV2ZW50IGxpc3RlbmVyczogbGlrZSBidXR0b24sIGRlbGV0ZSBidXR0b24sIG9wZW4gbW9kYWwgd2luZG93ICovXHJcblxyXG5jbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgdXNlcklkLCBvd25lcklkLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VCdXR0b24sIGhhbmRsZURlbGV0ZUNhcmRCdXR0b24pIHtcclxuICAgIHRoaXMuX2ltYWdlID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX3RpdGxlID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2FsdCA9IGNhcmREYXRhLmFsdDtcclxuICAgIHRoaXMuX2xpa2VzID0gY2FyZERhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9pZCA9IGNhcmREYXRhLl9pZDtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBvd25lcklkO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24gPSBoYW5kbGVMaWtlQnV0dG9uO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZEJ1dHRvbiA9IGhhbmRsZURlbGV0ZUNhcmRCdXR0b247XHJcbiAgfVxyXG5cclxuICBnZXRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuZmluZCh1c2VyID0+IHVzZXIuX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gIH1cclxuXHJcbiAgc2V0TGlrZXMobGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcbiAgICBjb25zdCBsaWtlc0Ftb3VudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKS50ZXh0Q29udGVudCA9IGxpa2VzQW1vdW50O1xyXG5cclxuICAgIGlmKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJykuY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJykuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgZGVsZXRlQ2FyZEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJyk7XHJcbiAgICBkZWxldGVDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZEJ1dHRvbigpKTtcclxuXHJcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcclxuICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fcGljdHVyZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIFxyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3BpY3R1cmUnKTtcclxuICAgIGNvbnN0IGNhcmREZXNjcmlwdGlvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZXNjcmlwdGlvbicpO1xyXG5cclxuICAgIHRoaXMuc2V0TGlrZXModGhpcy5fbGlrZXMpO1xyXG5cclxuICAgIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpO1xyXG4gICAgaWYoISh0aGlzLl91c2VySWQgPT09IHRoaXMuX293bmVySWQpKSB7XHJcbiAgICAgIGNhcmREZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fZGVsZXRlLWJ1dHRvbl9kaXNhYmxlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9hbHQ7XHJcbiAgICBjYXJkRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IENhcmQgfTsiLCIvKiBDbGFzcyBmb3IgZm9ybXMgdmFsaWRhdGlvbiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZ09iamVjdCwgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZ09iamVjdDtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IgKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIFxyXG4gIF9oaWRlSW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5IChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBfaGFzSW52YWxpZElucHV0ICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pXHJcbiAgfVxyXG4gIFxyXG4gIF9zZXRCdXR0b25Ub0Rpc2FibGVkU3RhdGUgKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuICBcclxuICBfc2V0QnV0dG9uVG9FbmFibGVkU3RhdGUgKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgX2NoYW5nZUJ1dHRvblN0YXRlIChpbnB1dExpc3QpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9zZXRCdXR0b25Ub0Rpc2FibGVkU3RhdGUodGhpcy5fYnV0dG9uRWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zZXRCdXR0b25Ub0VuYWJsZWRTdGF0ZSh0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzICgpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fY2hhbmdlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICBcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpXHJcbiAgICAgICAgdGhpcy5fY2hhbmdlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfVxyXG4gIFxyXG4gIGVuYWJsZVZhbGlkYXRpb24gKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIFxyXG4gIHJlc2V0Rm9ybVZhbGlkYXRpb24gKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pXHJcbiAgICB0aGlzLl9zZXRCdXR0b25Ub0Rpc2FibGVkU3RhdGUoKTtcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTW91c2VDbGljayA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVNb3VzZUNsaWNrKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlTW91c2VDbGljayk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQsIGZvcm1WYWxpZGF0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybVZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3I7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKSk7XHJcbiAgICBjb25zdCB2YWx1ZXNPYmplY3QgPSB7fTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgdmFsdWVzT2JqZWN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWx1ZXNPYmplY3Q7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fZm9ybVZhbGlkYXRvci5yZXNldEZvcm1WYWxpZGF0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcclxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcycsIHtoZWFkZXJzOiB0aGlzLl9oZWFkZXJzfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcclxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoe25hbWUsbGlua30pIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmsgXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICB9XHJcblxyXG4gIGFkZExpa2UoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcy9saWtlcy8nICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpXHJcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvY2FyZHMvbGlrZXMvJyArIGlkLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApKVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzLycgKyBpZCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGVQaG90byhhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZS9hdmF0YXInLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhclxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpXHJcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGVJbmZvKHtuYW1lLGFib3V0fSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lJywge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGFib3V0XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4gKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpXHJcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6ICdodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0zLWVuJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImMwZDA3MDkwLThjODAtNDljMi1hYTdhLWNkNTY3N2EzNDk4NFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICB9XHJcbn0pOyIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQgeyBcclxuICAgICAgICBjb25maWdPYmplY3QsIFxyXG4gICAgICAgIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gICAgICAgIGVkaXRQcm9maWxlRm9ybSxcclxuICAgICAgICBwb3B1cElucHV0TmFtZSxcclxuICAgICAgICBwb3B1cElucHV0SW5mbyxcclxuICAgICAgICBhZGRDYXJkQnV0dG9uLFxyXG4gICAgICAgIGFkZENhcmRGb3JtLFxyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgICBjaGFuZ2VBdmF0YXJGb3JtXHJcbiAgICAgIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoQ29uZmlybWF0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHsgYXBpIH0gZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xyXG5cclxuLyogRm9ybXMgdmFsaWRhdGlvbiAqL1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnT2JqZWN0LGVkaXRQcm9maWxlRm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWdPYmplY3QsIGFkZENhcmRGb3JtKTtcclxuY29uc3QgY2hhbmdlQXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZ09iamVjdCxjaGFuZ2VBdmF0YXJGb3JtKTtcclxuXHJcbihmdW5jdGlvbiBzZXRGb3Jtc1ZhbGlkYXRvcigpIHtcclxuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIGNoYW5nZUF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59KSgpO1xyXG5cclxuLyogQ2FyZCBoYW5kbGVycyBhbmQgcmVuZGVyaW5nICovXHJcblxyXG5jb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAoaXRlbSkgPT4ge1xyXG4gIGltYWdlUG9wdXAub3BlbihpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XHJcbn0gXHJcblxyXG5jb25zdCBoYW5kbGVMaWtlQnV0dG9uID0gKGNhcmQpID0+IHtcclxuICBpZiAoY2FyZC5pc0xpa2VkKCkpIHtcclxuICAgIGFwaS5yZW1vdmVMaWtlKGNhcmQuZ2V0SWQoKSlcclxuICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICBjYXJkLnNldExpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgIH0pIFxyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGkuYWRkTGlrZShjYXJkLmdldElkKCkpXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgY2FyZC5zZXRMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICB9KVxyXG4gIH1cclxufVxyXG5cclxubGV0IGNhcmRUb0RlbGV0ZTtcclxuY29uc3QgaGFuZGxlRGVsZXRlQ2FyZEJ1dHRvbiA9IChjYXJkKSA9PiB7XHJcbiAgZGVsZXRlQ2FyZFN1Ym1pc3Npb25Qb3B1cC5vcGVuKCk7XHJcbiAgY2FyZFRvRGVsZXRlID0gY2FyZDtcclxufVxyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgaXRlbSwgXHJcbiAgICB1c2VySWQsXHJcbiAgICBpdGVtLm93bmVyLl9pZCxcclxuICAgICcjY2FyZCcsIFxyXG4gICAgKCkgPT4gaGFuZGxlQ2FyZENsaWNrKGl0ZW0pLCBcclxuICAgICgpID0+IGhhbmRsZUxpa2VCdXR0b24oY2FyZCksXHJcbiAgICAoKSA9PiBoYW5kbGVEZWxldGVDYXJkQnV0dG9uKGNhcmQpXHJcbiAgKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG4vKiBQYWdlIGluaXRpYWxpemF0aW9uICovXHJcblxyXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbih7XHJcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShyZW5kZXJDYXJkKGl0ZW0pKTtcclxuICAgIFxyXG4gIH1cclxufSwgJy5nYWxsZXJ5X19saXN0Jyk7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgYXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxuXHJcbiAgICBjYXJkc1NlY3Rpb24ucmVuZGVyQ2FyZHMoY2FyZHMpO1xyXG4gIH0pXHJcblxyXG4vKiBDcmVhdGluZyBjbGFzc2VzIGluc3RhbmNlcyBhbmQgc2V0dGluZyBldmVudCBsaXN0ZW5lcnMgKi9cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKCcucHJvZmlsZV9fbmFtZScsICcucHJvZmlsZV9fYWJvdXQnKTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX3BpY3R1cmUnKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoYnV0dG9uKSB7XHJcbiAgY29uc3QgYnV0dG9uVGV4dCA9IGJ1dHRvbi50ZXh0Q29udGVudDtcclxuICBidXR0b24udGV4dENvbnRlbnQgPSAnU2F2aW5nLi4uJztcclxuICByZXR1cm4gYnV0dG9uVGV4dDtcclxufVxyXG5cclxuY29uc3QgaGFuZGxlRWRpdFN1Ym1pc3Npb24gPSAocG9wdXApID0+IHtcclxuICBjb25zdCBmb3JtQnV0dG9uID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWJtaXQtYnV0dG9uJylcclxuICBjb25zdCBmb3JtQnV0dG9uVGV4dCA9IHJlbmRlckxvYWRpbmcoZm9ybUJ1dHRvbik7XHJcblxyXG4gIGFwaS5lZGl0UHJvZmlsZUluZm8ocG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKSlcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cC5jbG9zZSgpO1xyXG4gICAgICBmb3JtQnV0dG9uLnRleHRDb250ZW50ID0gZm9ybUJ1dHRvblRleHRcclxuICAgIH0pXHJcbn1cclxuXHJcbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAnLnBvcHVwX3R5cGVfZWRpdCcsIFxyXG4gICgpID0+IGhhbmRsZUVkaXRTdWJtaXNzaW9uKGVkaXRGb3JtUG9wdXApLCBcclxuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IpO1xyXG5lZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBoYW5kbGVBZGRDYXJkU3VibWlzc2lvbiA9IChwb3B1cCkgPT4ge1xyXG4gIGNvbnN0IG5ld0NhcmRWYWx1ZXMgPSBwb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xyXG4gIG5ld0NhcmRWYWx1ZXMuYWx0ID0gYEhlcmUgd2FzIGEgYmVhdXRpZnVsIHBpY3R1cmUgb2YgJHtuZXdDYXJkVmFsdWVzLm5hbWV9YDtcclxuXHJcbiAgY29uc3QgZm9ybUJ1dHRvbiA9IGFkZENhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWJtaXQtYnV0dG9uJylcclxuICBjb25zdCBmb3JtQnV0dG9uVGV4dCA9IHJlbmRlckxvYWRpbmcoZm9ybUJ1dHRvbik7XHJcblxyXG4gIGFwaS5hZGRDYXJkKG5ld0NhcmRWYWx1ZXMpXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShyZW5kZXJDYXJkKHJlcykpXHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cC5jbG9zZSgpO1xyXG4gICAgICBmb3JtQnV0dG9uLnRleHRDb250ZW50ID0gZm9ybUJ1dHRvblRleHQ7XHJcbiAgICB9KVxyXG59XHJcblxyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAnLnBvcHVwX3R5cGVfYWRkLWNhcmQnLCBcclxuICAoKSA9PiBoYW5kbGVBZGRDYXJkU3VibWlzc2lvbihhZGRDYXJkUG9wdXApLCBcclxuICBhZGRGb3JtVmFsaWRhdG9yKTtcclxuICBhZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2hhbmdlQXZhdGFyU3VibWlzc2lvbiA9IChwb3B1cCkgPT4ge1xyXG4gICAgY29uc3QgZm9ybUJ1dHRvbiA9IGNoYW5nZUF2YXRhckZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdC1idXR0b24nKVxyXG4gICAgY29uc3QgZm9ybUJ1dHRvblRleHQgPSByZW5kZXJMb2FkaW5nKGZvcm1CdXR0b24pO1xyXG5cclxuICAgIGFwaS5lZGl0UHJvZmlsZVBob3RvKHBvcHVwLmdldElucHV0VmFsdWVzKCkuYXZhdGFyKVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGF2YXRhci5zcmMgPSByZXMuYXZhdGFyO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICBmb3JtQnV0dG9uLnRleHRDb250ZW50ID0gZm9ybUJ1dHRvblRleHQ7XHJcbiAgICAgIH0pXHJcbiAgfVxyXG5cclxuY29uc3QgY2hhbmdlQXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAnLnBvcHVwX3R5cGVfZWRpdC1hdmF0YXInLCBcclxuICAoKSA9PiBoYW5kbGVDaGFuZ2VBdmF0YXJTdWJtaXNzaW9uKGNoYW5nZUF2YXRhclBvcHVwKSwgXHJcbiAgY2hhbmdlQXZhdGFyRm9ybVZhbGlkYXRvcik7XHJcbmNoYW5nZUF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBoYW5kbGVEZWxldGVDYXJkU3VibWlzc2lvbiA9IChwb3B1cCkgPT4ge1xyXG4gIGFwaS5kZWxldGVDYXJkKGNhcmRUb0RlbGV0ZS5nZXRJZCgpKVxyXG4gICAgLmZpbmFsbHkocG9wdXAuY2xvc2UoKSk7XHJcbiAgY2FyZFRvRGVsZXRlLmRlbGV0ZUNhcmQoKTtcclxufVxyXG5cclxuY29uc3QgZGVsZXRlQ2FyZFN1Ym1pc3Npb25Qb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXHJcbiAgJy5wb3B1cF90eXBlX2RlbGV0ZS1jYXJkJywgXHJcbiAgKCkgPT4gaGFuZGxlRGVsZXRlQ2FyZFN1Ym1pc3Npb24oZGVsZXRlQ2FyZFN1Ym1pc3Npb25Qb3B1cCkpO1xyXG5kZWxldGVDYXJkU3VibWlzc2lvblBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vKiBFdmVudCBsaXN0ZW5lcnMgZm9yIG9wZW5pbmcgbW9kYWwgd2luZG93cyAqL1xyXG5cclxuY29uc3QgZmlsbFByb2ZpbGVJbmZvRm9ybSA9ICgpID0+IHtcclxuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwb3B1cElucHV0TmFtZS52YWx1ZSA9IGluZm8ubmFtZTtcclxuICBwb3B1cElucHV0SW5mby52YWx1ZSA9IGluZm8uam9iO1xyXG59XHJcblxyXG4oZnVuY3Rpb24gc2V0TW9kYWxzRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgcHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBmaWxsUHJvZmlsZUluZm9Gb3JtKCk7XHJcbiAgICBlZGl0Rm9ybVBvcHVwLm9wZW4oKVxyXG4gIH0pO1xyXG5cclxuICBhZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gYWRkQ2FyZFBvcHVwLm9wZW4oKSk7XHJcblxyXG4gIGF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNoYW5nZUF2YXRhclBvcHVwLm9wZW4oKSk7XHJcbn0pKCk7XHJcblxyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBzZWN0aW9uU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9zZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWN0aW9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9zZWN0aW9uLmFwcGVuZChpdGVtKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckNhcmRzKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pXHJcbiAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLl9uYW1lRmllbGQudGV4dENvbnRlbnQsIGpvYjogdGhpcy5fam9iRmllbGQudGV4dENvbnRlbnQgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHVzZXIpIHtcclxuICAgIHRoaXMuX25hbWVGaWVsZC50ZXh0Q29udGVudCA9IHVzZXIubmFtZTtcclxuICAgIHRoaXMuX2pvYkZpZWxkLnRleHRDb250ZW50ID0gdXNlci5hYm91dDtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihpbWFnZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGNvbnN0IHBvcHVwUGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1waWN0dXJlLWJveF9faW1hZ2UnKTtcclxuICAgIGNvbnN0IHBvcHVwQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1waWN0dXJlLWJveF9fY2FwdGlvbicpO1xyXG4gICAgcG9wdXBQaWN0dXJlLnNyYyA9IGltYWdlO1xyXG4gICAgcG9wdXBQaWN0dXJlLmFsdCA9IGBIZXJlIHdhcyBhIGJlYXV0aWZ1bCBwaWN0dXJlIG9mICR7ZGVzY3JpcHRpb259YDtcclxuICAgIHBvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZ1bmN0aW9uKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3N1Ym1pdEZ1bmN0aW9uID0gc3VibWl0RnVuY3Rpb247XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEZ1bmN0aW9uKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiY29uZmlnT2JqZWN0IiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVkaXRQcm9maWxlRm9ybSIsInBvcHVwSW5wdXROYW1lIiwicG9wdXBJbnB1dEluZm8iLCJhZGRDYXJkQnV0dG9uIiwiYWRkQ2FyZEZvcm0iLCJjaGFuZ2VBdmF0YXJGb3JtIiwiYXZhdGFyIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJ1c2VySWQiLCJvd25lcklkIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VCdXR0b24iLCJoYW5kbGVEZWxldGVDYXJkQnV0dG9uIiwidGhpcyIsIl9pbWFnZSIsImxpbmsiLCJfdGl0bGUiLCJuYW1lIiwiX2FsdCIsImFsdCIsIl9saWtlcyIsImxpa2VzIiwiX2lkIiwiX3VzZXJJZCIsIl9vd25lcklkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkQnV0dG9uIiwiZ2V0SWQiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiaXNMaWtlZCIsImZpbmQiLCJ1c2VyIiwic2V0TGlrZXMiLCJsaWtlc0Ftb3VudCIsImxlbmd0aCIsIl9jYXJkRWxlbWVudCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZGVsZXRlQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZW5lcmF0ZUNhcmQiLCJjYXJkSW1hZ2UiLCJjYXJkRGVzY3JpcHRpb24iLCJjYXJkRGVsZXRlQnV0dG9uIiwic3JjIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9idXR0b25FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsImlucHV0IiwiX3NldEJ1dHRvblRvRGlzYWJsZWRTdGF0ZSIsImRpc2FibGVkIiwiX3NldEJ1dHRvblRvRW5hYmxlZFN0YXRlIiwiX2NoYW5nZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0Rm9ybVZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlTW91c2VDbGljayIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0IiwiZm9ybVZhbGlkYXRvciIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9mb3JtVmFsaWRhdG9yIiwiZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXNPYmplY3QiLCJ2YWx1ZSIsInJlc2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZ2V0SW5pdGlhbENhcmRzIiwiYWRkQ2FyZCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJlZGl0UHJvZmlsZVBob3RvIiwiZWRpdFByb2ZpbGVJbmZvIiwiYWJvdXQiLCJhdXRob3JpemF0aW9uIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImNoYW5nZUF2YXRhckZvcm1WYWxpZGF0b3IiLCJjYXJkVG9EZWxldGUiLCJyZW5kZXJDYXJkIiwiaXRlbSIsImNhcmQiLCJvd25lciIsImltYWdlUG9wdXAiLCJkZWxldGVDYXJkU3VibWlzc2lvblBvcHVwIiwiY2FyZHNTZWN0aW9uIiwic2VjdGlvblNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfc2VjdGlvbiIsImFkZEl0ZW0iLCJhcHBlbmQiLCJyZW5kZXJDYXJkcyIsIml0ZW1zIiwiYWxsIiwidXNlckRhdGEiLCJjYXJkcyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRmllbGQiLCJfam9iRmllbGQiLCJqb2IiLCJpbWFnZSIsImRlc2NyaXB0aW9uIiwicG9wdXBQaWN0dXJlIiwicG9wdXBDYXB0aW9uIiwicmVuZGVyTG9hZGluZyIsImJ1dHRvbiIsImJ1dHRvblRleHQiLCJlZGl0Rm9ybVBvcHVwIiwicG9wdXAiLCJmb3JtQnV0dG9uIiwiZm9ybUJ1dHRvblRleHQiLCJmaW5hbGx5IiwiaGFuZGxlRWRpdFN1Ym1pc3Npb24iLCJhZGRDYXJkUG9wdXAiLCJuZXdDYXJkVmFsdWVzIiwiaGFuZGxlQWRkQ2FyZFN1Ym1pc3Npb24iLCJjaGFuZ2VBdmF0YXJQb3B1cCIsImhhbmRsZUNoYW5nZUF2YXRhclN1Ym1pc3Npb24iLCJzdWJtaXRGdW5jdGlvbiIsIl9zdWJtaXRGdW5jdGlvbiIsImhhbmRsZURlbGV0ZUNhcmRTdWJtaXNzaW9uIiwiaW5mbyIsImZpbGxQcm9maWxlSW5mb0Zvcm0iXSwic291cmNlUm9vdCI6IiJ9